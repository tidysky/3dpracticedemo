{
  "version": 3,
  "sources": ["../../strict-uri-encode/index.js", "../../decode-uri-component/index.js", "../../split-on-first/index.js", "../../filter-obj/index.js", "../../query-string/index.js", "../../debounce/index.js", "../../vecn/src/index.js", "../../fast-deep-equal/index.js", "../../@juggle/resize-observer/lib/utils/resizeObservers.js", "../../@juggle/resize-observer/lib/algorithms/hasActiveObservations.js", "../../@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js", "../../@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js", "../../@juggle/resize-observer/lib/ResizeObserverBoxOptions.js", "../../@juggle/resize-observer/lib/utils/freeze.js", "../../@juggle/resize-observer/lib/ResizeObserverSize.js", "../../@juggle/resize-observer/lib/DOMRectReadOnly.js", "../../@juggle/resize-observer/lib/utils/element.js", "../../@juggle/resize-observer/lib/utils/global.js", "../../@juggle/resize-observer/lib/algorithms/calculateBoxSize.js", "../../@juggle/resize-observer/lib/ResizeObserverEntry.js", "../../@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js", "../../@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js", "../../@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js", "../../@juggle/resize-observer/lib/utils/process.js", "../../@juggle/resize-observer/lib/utils/queueMicroTask.js", "../../@juggle/resize-observer/lib/utils/queueResizeObserver.js", "../../@juggle/resize-observer/lib/utils/scheduler.js", "../../@juggle/resize-observer/lib/ResizeObservation.js", "../../@juggle/resize-observer/lib/ResizeObserverDetail.js", "../../@juggle/resize-observer/lib/ResizeObserverController.js", "../../@juggle/resize-observer/lib/ResizeObserver.js", "../../react-intersection-observer/src/InView.tsx", "../../react-intersection-observer/src/observe.ts", "../../react-intersection-observer/src/useInView.tsx", "../../@14islands/r3f-scroll-rig/node_modules/suspend-react/dist/index.js", "../../supports-webp/index.js", "../../lenis/package.json", "../../lenis/packages/core/src/maths.ts", "../../lenis/packages/core/src/animate.ts", "../../lenis/packages/core/src/debounce.ts", "../../lenis/packages/core/src/dimensions.ts", "../../lenis/packages/core/src/emitter.ts", "../../lenis/packages/core/src/virtual-scroll.ts", "../../lenis/packages/core/src/lenis.ts", "../../@14islands/r3f-scroll-rig/src/hooks/useIsomorphicLayoutEffect.ts", "../../@14islands/r3f-scroll-rig/src/config.ts", "../../@14islands/r3f-scroll-rig/src/store.ts", "../../@14islands/r3f-scroll-rig/src/components/ResizeManager.ts", "../../@14islands/r3f-scroll-rig/src/components/PerspectiveCamera.tsx", "../../@14islands/r3f-scroll-rig/src/components/OrthographicCamera.tsx", "../../@14islands/r3f-scroll-rig/src/utils/helpers.ts", "../../@14islands/r3f-scroll-rig/src/renderer-api.ts", "../../@14islands/r3f-scroll-rig/src/hooks/useScrollRig.ts", "../../@14islands/r3f-scroll-rig/src/components/GlobalChildren.tsx", "../../@14islands/r3f-scroll-rig/src/components/GlobalRenderer.tsx", "../../@14islands/r3f-scroll-rig/src/components/CanvasErrorBoundary.tsx", "../../@14islands/r3f-scroll-rig/src/components/GlobalCanvas.tsx", "../../@14islands/r3f-scroll-rig/src/components/DebugMesh.tsx", "../../@14islands/r3f-scroll-rig/src/hooks/useWindowSize.ts", "../../@14islands/r3f-scroll-rig/src/utils/math.ts", "../../@14islands/r3f-scroll-rig/src/scrollbar/useScrollbar.ts", "../../@14islands/r3f-scroll-rig/src/hooks/useTracker.ts", "../../@14islands/r3f-scroll-rig/src/components/ScrollScene.tsx", "../../@14islands/r3f-scroll-rig/src/components/ViewportScrollScene.tsx", "../../@14islands/r3f-scroll-rig/src/hooks/useCanvas.ts", "../../@14islands/r3f-scroll-rig/src/components/UseCanvas.tsx", "../../@14islands/r3f-scroll-rig/src/hooks/useImageAsTexture.ts", "../../@14islands/r3f-scroll-rig/src/scrollbar/SmoothScrollbar.tsx", "../../@14islands/r3f-scroll-rig/src/components/R3FSmoothScrollbar.tsx", "../../@14islands/r3f-scroll-rig/src/index.ts"],
  "sourcesContent": ["'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n", "'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp('(' + token + ')|([^%]+?)', 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn [decodeURIComponent(components.join(''))];\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher) || [];\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher) || [];\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n", "'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n", "'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n", "'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${encode(object.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n", "/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n", "/**\n * An object for memoizing vecType functions.\n * @type {Object}\n * @private\n */\nlet vecTypes = (function () {\n  const handler = {\n    get: function (obj, prop) {\n      if (!obj.hasOwnProperty(prop)) {\n        obj[prop] = getVecType(prop)\n      }\n      return obj[prop]\n    }\n  }\n\n  return new Proxy({}, handler)\n})()\n\n/**\n * A class for fixed-size vectors of numbers.\n * @extends Array\n */\nclass vecn extends Array {\n  /**\n   * Creates a vecn of the specified dimension. This should never be called\n   * by the user (as if this were an abstract class).\n   * @param {number} dimension The dimension of this vector.\n   * @param {number[]} [args=[]] The numbers to be put in the vector.\n   */\n  constructor (dimension, args) {\n    args = flattenOuter(args)\n\n    if (!args.every((x) => type(x) === 'Number')) {\n      throw new TypeError('All arguments must be numbers.')\n    }\n    if (args.length > 1 && args.length !== dimension) {\n      throw new Error('Argument list must be empty, have a single number, or have a length equal to the dimension.')\n    }\n\n    if (args.length === 0) {\n      args = [0]\n    }\n    if (args.length === 1 && type(args[0]) === 'Number') {\n      args = Array(dimension).fill(args[0])\n    }\n\n    if (dimension > 1) {\n      super(...args)\n    } else {\n      super(1)\n      this[0] = args[0]\n    }\n\n    Reflect.defineProperty(this, 'pop', {\n      value: undefined,\n      enumerable: false\n    })\n    Reflect.defineProperty(this, 'push', {\n      value: undefined,\n      enumerable: false\n    })\n    Reflect.defineProperty(this, 'shift', {\n      value: undefined,\n      enumerable: false\n    })\n    Reflect.defineProperty(this, 'unshift', {\n      value: undefined,\n      enumerable: false\n    })\n  }\n\n  /**\n   * The L2 norm (Euclidian norm) of the vector.\n   * @type {number}\n   */\n  get magnitude () {\n    return this.pnorm(2)\n  }\n\n  // --------------------------------------------------------------------------\n  //   Arithmetic\n\n  /**\n   * Returns a vector where this is divided by v componentwise. If v is\n   * a single number, the vector is scaled by 1/v.\n   * @param {number|number[]} v The value to multiply with.\n   *\n   * @returns {vecn} A new vector with the divided components.\n   */\n  div (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.length; ++i) {\n      result[i] = this[i] / v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Returns a vector where v is subtracted from the components of this\n   * vector. If v is a single number, it is subtracted to each component. If v\n   * is a vector, the vectors are combined componentwise.\n   * @param {number|number[]} v The value to subtract from this vector.\n   *\n   * @returns {vecn} A new vector with the combined components.\n   */\n  minus (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = this[i] - v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Negates each element in this vector.\n   * @returns {vecn} A new vector where all elements are negated.\n   */\n  neg () {\n    return vecTypes[this.dim](this.times(-1))\n  }\n\n  /**\n   * Returns a vector where v is added to the components of this vector. If v\n   * is a single number, it is added to each component. If v is a vector, the\n   * vectors are added componentwise.\n   * @param {number|number[]} v The value to add to this vector.\n   *\n   * @returns {vecn} A new vector with the summed components.\n   */\n  plus (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = this[i] + v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Returns a vector where each component of this was raised to a power p.\n   * @param {number} p The power to raise each component by.\n   *\n   * @returns {vecn} A new vector with the exponentiated components.\n   */\n  pow (p) {\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = Math.pow(this[i], p)\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Returns a vector where v and this are multiplied componentwise. If v is\n   * a single number, the vector is scaled by v.\n   * @param {number|number[]} v The value to multiply with.\n   *\n   * @returns {vecn} A new vector with the multiplied components.\n   */\n  times (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = this[i] * v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  // --------------------------------------------------------------------------\n  //   Vector Operations\n\n  /**\n   * Dot product of two vectors.\n   * @param {number[]} v The vector to dot with this one.\n   *\n   * @returns {number} The dot product between this and v.\n   */\n  dot (v) {\n    checkCompatibility(v, this.dim)\n\n    let result = 0\n    for (let i = 0; i < this.dim; ++i) {\n      result += this[i] * v[i]\n    }\n    return result\n  }\n\n  /**\n   * Scales this vector to a magnitude of 1.\n   *\n   * @returns {vecn} A new vector with scaled components.\n   */\n  normalize () {\n    return this.div(this.magnitude)\n  }\n\n  /**\n   * Evaluates the p-norm (or lp-norm) of this vector.\n   * @param {number} p The p-value to evaluate.\n   *\n   * @returns {number} The norm of this vector.\n   */\n  pnorm (p) {\n    let result = 0\n    for (let i = 0; i < this.dim; ++i) {\n      result += Math.pow(Math.abs(this[i]), p)\n    }\n    return Math.pow(result, 1 / p)\n  }\n\n  /**\n   * Reflects this vector across the provided vector. The normal can be imagined\n   * as a surface normal or as describing a hyperpalane.\n   * @param {number[]} normal A vector describing the hyperplane to reflect off of.\n   *\n   * @returns {vecn} The reflected vector.\n   */\n  reflect (normal) {\n    const n = normal.normalize()\n    return this.minus(n.times(2 * this.dot(n)))\n  }\n\n  // --------------------------------------------------------------------------\n  //   Extras\n\n  /**\n   * Finds the indices of the max value in this vector.\n   *\n   * @returns {number[]} An array of indices corresponding to the max values.\n   */\n  argmax () {\n    const maxVal = this.max()\n    return this.reduce((acc, x, i) => x === maxVal ? acc.concat([i]) : acc, [])\n  }\n\n  /**\n   * Finds the indices of the min value in this vector.\n   *\n   * @returns {number[]} An array of indices corresponding to the min values.\n   */\n  argmin () {\n    const minVal = this.min()\n    return this.reduce((acc, x, i) => x === minVal ? acc.concat([i]) : acc, [])\n  }\n\n  /**\n   * Creates a new vector from the provided indices of this one. Basically\n   * equivalent to swizzling.\n   * @param {number[]} indices The indices to select into a new vector.\n   *\n   * @returns {vecn} A new vector from the provided indices.\n   */\n  choose (indices) {\n    if (!Array.isArray(indices)) {\n      throw new TypeError('Argument must be a list of indices.')\n    }\n    if (!indices.every((i) => i < this.dim && isIndex(i.toString()))) {\n      throw new RangeError('All elements of argument must be valid indices.')\n    }\n\n    let v = []\n    indices.forEach((i) => v.push(this[i]))\n    return vecTypes[v.length](v)\n  }\n\n  /**\n   * Creates a duplicate of this vector. Same as passing this vector through\n   * the factory that created it.\n   *\n   * @returns {vecn} A deep copy of this vector.\n   */\n  copy () {\n    return vecTypes[this.dim](this)\n  }\n\n  /**\n   * Returns whether every element in each vector is equal.\n   * @param {number[]} v A vector to test against.\n   *\n   * @returns {boolean} True if both vectors have the same dimension and values.\n   */\n  equals (v) {\n    return v.length === this.dim && v.every((x, i) => this[i] === x)\n  }\n\n  /**\n   * Returns whether every element in each vector is approximately equal.\n   * @param {number[]} v A vector to test against.\n   * @param {number} epsilon The largest meaningful difference between two values.\n   *\n   * @returns {boolean} True if both vectors have the same dimension and the\n   * distance between each number is less than epsilon.\n   */\n  approximatelyEquals (v, epsilon = 0.00000001) {\n    return v.length === this.dim && v.every((x, i) => Math.abs(this[i] - x) < epsilon)\n  }\n\n  /**\n   * Returns the max value of this vector.\n   *\n   * @returns {number} The max value of this vector.\n   */\n  max () {\n    return Math.max(...this)\n  }\n\n  /**\n   * Returns the min value of this vector.\n   *\n   * @returns {number} The min value of this vector.\n   */\n  min () {\n    return Math.min(...this)\n  }\n\n  /**\n   * Sums the components of this vector.\n   *\n   * @returns {number} The sum of the components of this vector.\n   */\n  sum () {\n    return this.reduce((acc, x) => acc + x, 0)\n  }\n\n  /**\n   * Converts this vector into an Array.\n   *\n   * @returns {number[]} An array of the contents of this vector.\n   */\n  toArray () {\n    return Array.from(this)\n  }\n\n  // --------------------------------------------------------------------------\n  //   Array Overrides\n\n  /**\n   * Same as Array.prototype.concat, but return value is of a new vecType.\n   *\n   * @returns {vecn}\n   */\n  concat (...args) {\n    const result = super.concat.apply(this.toArray(), args)\n    return vecTypes[result.length](result)\n  }\n\n  /**\n   * Same as Array.prototype.filter, but returns an Array if the result has 0\n   * entries.\n   *\n   * @returns {vecn|number[]}\n   */\n  filter (...args) {\n    const result = super.filter.apply(this.toArray(), args)\n    if (result.length > 0) {\n      return vecTypes[result.length](result)\n    }\n    return result\n  }\n\n  /**\n   * Same as Array.prototype.map, but returns an Array if the result contains\n   * non-numbers.\n   *\n   * @returns {vecn|Array}\n   */\n  map (...args) {\n    const result = super.map(...args)\n    if (result.every((x) => type(x) === 'Number')) {\n      return result\n    }\n    return result.toArray()\n  }\n\n  /**\n   * Same as Array.prototype.slice, but returns an Array if the result has 0\n   * entries.\n   */\n  slice (...args) {\n    const result = super.slice.apply(this.toArray(), args)\n    if (result.length > 0) {\n      return vecTypes[result.length](result)\n    }\n    return result\n  }\n\n  /**\n   * A restrictive version of the Array.prototype.splice that requires all\n   * removed elements to be replaced.\n   */\n  splice (...args) {\n    let test = this.toArray()\n    test.splice(...args)\n\n    if (test.length !== this.dim) {\n      throw new Error('All removed elements must be replaced.')\n    }\n    if (!test.every((x) => type(x) === 'Number')) {\n      throw new TypeError('All elements must be numbers.')\n    }\n\n    test.forEach((x, i) => { this[i] = x })\n  }\n\n  toString () {\n    return this.reduce((s, x, i) => {\n      return s + x + (i === this.dim - 1 ? ' ' : ', ')\n    }, '[ ') + ']'\n  }\n}\n\n// --------------------------------------------------------------------------\n//   General Tools\n\n/**\n * Adds an arbitrary number of vectors together. All vectors must be of the same\n * dimension.\n * @param {...vecn} vecs Vectors to add together.\n *\n * @returns {vecn} The sum of all the provided vectors.\n */\nfunction add (...vecs) {\n  const dim = vecs[0].dim\n  if (!vecs.every((v) => v.dim === dim)) {\n    throw new TypeError('All vectors must have the same dimension.')\n  }\n  return vecs.reduce((acc, v) => acc.plus(v), vecTypes[dim]())\n}\n\n/**\n * The validator to be used in the proxy for all vec objects. Catches swizzling\n * properties, makes sure assignment only works for indices, and disallows\n * non-numerical assignments. Used in getVecType.\n * @constant\n * @type {Object}\n * @private\n */\nconst validator = {\n  set: function (obj, prop, value) {\n    if (prop === 'length') {\n      return false\n    }\n    if (isIndex(prop)) {\n      if (Number(prop) >= obj.dim) {\n        throw new RangeError('Vector may not have more elements than dimension.')\n      } else if (type(value) !== 'Number') {\n        throw new TypeError('Vectors may only contain numbers.')\n      } else {\n        obj[prop] = value\n        return true\n      }\n    }\n\n    const swizzleSymbolMap = getSwizzleSymbolMap(prop.toString())\n    if (obj.dim <= 4 && swizzleSymbolMap) {\n      swizzleSet(obj, prop.toString(), swizzleSymbolMap, value)\n      return true\n    }\n\n    return false\n  },\n  get: function (obj, prop) {\n    const swizzleSymbolMap = getSwizzleSymbolMap(prop.toString())\n    if (obj.dim <= 4 && swizzleSymbolMap) {\n      return swizzleGet(obj, prop, swizzleSymbolMap)\n    }\n\n    return obj[prop]\n  }\n}\n\n/**\n * Returns a factory function for vectors of the specified dimension.\n * @param {number} dim The dimension of the new vector type.\n *\n * @returns {Function} A factory (not a constructor) for creating new vecs.\n */\nfunction getVecType (dim) {\n  dim = Number(dim)\n\n  if (!(dim in vecTypes)) {\n    if (isNaN(dim)) throw new TypeError('Dimension must be coercible to a number.')\n    if (dim <= 0) throw new RangeError('Dimension must be positive.')\n    if (!Number.isInteger(dim)) throw new RangeError('Dimension must be positive.')\n\n    // Doing a little bit of exploiting ES6 to dynamically name the class\n    let classname = 'vec' + dim\n    let VecType = ({[classname]: class extends vecn {\n      constructor (...args) {\n        if (args.length === 1 && args[0] instanceof vecn) {\n          if (args[0].dim > dim) {\n            throw new TypeError('Cannot demote vectors.')\n          }\n          args = promoteArrayDimension(args[0].toArray(), dim)\n        }\n        super(dim, args)\n        Reflect.defineProperty(this, 'dim', {\n          value: dim,\n          writable: false,\n          enumerable: false\n        })\n      }\n    }})[classname]\n\n    let factory = function factory (...args) {\n      let target = new VecType(...args)\n      Object.preventExtensions(target)\n      return new Proxy(target, validator)\n    }\n    vecTypes[dim] = factory\n  }\n\n  return vecTypes[dim]\n}\n\n/**\n * The correct function for determining whether an object is a vecn.\n * @param {*} v The object in question.\n *\n * @returns {boolean} True if the object is an instance of vecn.\n */\nfunction isVec (v) {\n  return v instanceof vecn\n}\n\n/**\n * Linearly interpolates between two vectors.\n * @param {vecn} v1 The starting vector.\n * @param {vecn} v2 The ending vector.\n * @param {number} t The interpolant, which is clamped to the inteval [0, 1].\n *\n * @returns {vecn} The interpolated vector.\n */\nfunction lerp (v1, v2, t) {\n  if (v1.dim !== v2.dim) throw new TypeError('Vectors must have the same dimension.')\n  t = t < 0 ? 0 : (t > 1 ? 1 : t)\n  return v1.plus(v2.minus(v1).times(t))\n}\n\n/**\n * Multiplies an arbitrary number of vectors together. All vectors must be of the same\n * dimension.\n * @param {...vecn} vecs Vectors to multiply together.\n *\n * @returns {vecn} The product of all the provided vectors.\n */\nfunction multiply (...vecs) {\n  const dim = vecs[0].dim\n  if (!vecs.every((v) => v.dim === dim)) throw new TypeError('All vectors must have the same dimension.')\n  return vecs.reduce((acc, v) => acc.times(v), vecTypes[dim](1))\n}\n\n/**\n * Spherically interpolates between two vectors.\n * @param {vecn} v1 The starting vector.\n * @param {vecn} v2 The ending vector.\n * @param {number} t The interpolant, which is clamped to the inteval [0, 1].\n *\n * @returns {vecn} The interpolated vector.\n */\nfunction slerp (v1, v2, t) {\n  if (v1.dim !== v2.dim) throw new TypeError('Vectors must have the same dimension.')\n\n  t = t < 0 ? 0 : (t > 1 ? 1 : t)\n  let dot = v1.normalize().dot(v2.normalize())\n  dot = dot < -1 ? -1 : (dot > 1 ? 1 : dot)\n  const theta = Math.acos(dot) * t\n  const relative = v2.minus(v1.times(dot)).normalize()\n  const magnitude = v1.magnitude + ((v2.magnitude - v1.magnitude) * t)\n  return v1.times(Math.cos(theta)).plus(relative.times(Math.sin(theta)))\n    .normalize().times(magnitude)\n}\n\n// --------------------------------------------------------------------------\n//   Swizzling\n\n/**\n * The index corresponding to common names for indexing vectors.\n * @constant\n * @type {Object}\n * @private\n */\nconst namedIndices = [\n  {x: 0, y: 1, z: 2, w: 3},\n  {r: 0, g: 1, b: 2, a: 3},\n  {s: 0, t: 1, p: 2, q: 3}\n]\n\n/**\n * Gets the set of symbols corresponding to indices used for swizzling.\n * @private\n * @param {string} s The string used as a property to swizzle.\n *\n * @returns {Object} A map from characters to indices.\n */\nfunction getSwizzleSymbolMap (s) {\n  return namedIndices.find((map) => {\n    return s.split('').every((c) => c in map)\n  })\n}\n\n/**\n * Creates a new vector from the named indices given by swizzling.\n * @private\n * @param {vecn} v The vector to pull data from. The dimension is assumed to be\n * 2, 3, or 4, but this isn't enforced here.\n * @param {string} s The property being used to swizzle (e.g. 'xxy' or 'z').\n * @param {Object} set A map from characters to indices (assumed to be valid).\n *\n * @returns {undefined|number|vecn} Either undefined (if s isn't a valid swizzle\n * string), a number (if s has a length of 1), or a vecn where the values have\n * been rearranged according to the order given in s.\n */\nfunction swizzleGet (v, s, set) {\n  const newDim = s.length\n\n  if (newDim === 1) {\n    return v[set[s]]\n  }\n\n  let values = s.split('').reduce((acc, x) => {\n    let i = set[x]\n    return acc && i < v.dim ? acc.concat([v[i]]) : undefined\n  }, [])\n  return values ? new vecTypes[newDim](...values) : undefined\n}\n\n/**\n * Assigns the indexed values in v to the values in newVals in the order they\n * are described in in s.\n * @private\n * @param {vecn} v The starting vector.\n * @param {string} s The property being used to swizzle (e.g. 'xyz' or 'xz').\n * @param {Object} map A map from characters to indices (assumed to be valid).\n * @param {number|number[]} newVals The right hand side of the assignment\n *\n * @returns {vecn} A copy of v with the correct elements replaced.\n */\nfunction swizzleSet (v, s, map, newVals) {\n  if (s.length === 1) {\n    if (type(newVals) !== 'Number') {\n      throw new TypeError('Must set to a number')\n    }\n    v[map[s]] = newVals\n    return\n  }\n\n  if (!Array.isArray(newVals)) throw new TypeError('Right-hand side must be an array.')\n  if (s.length !== newVals.length) throw new TypeError('Right-hand side must have matching length.')\n  if (!newVals.every((item) => type(item) === 'Number')) throw new TypeError('All new values must be numbers.')\n\n  if (s.split('').some((c) => map[c] >= v.dim)) {\n    return\n  }\n\n  let valid = true\n  for (let i = 0, unique = {}; i < s.length; ++i) {\n    if (unique.hasOwnProperty(s[i])) {\n      valid = false\n      break\n    }\n    unique[s[i]] = true\n  }\n  if (!valid) throw new SyntaxError('Swizzle assignment does not allow symbols to be repeated.')\n\n  s.split('').map((c) => map[c]).forEach((index, i) => { v[index] = newVals[i] })\n}\n\n// --------------------------------------------------------------------------\n//   Helpers\n\n/**\n * Checks whether something is valid to do vector operations with and throws\n * a TypeError if not.\n * @private\n * @param {*} o An object to check.\n * @param {number} dim The dimension to check against.\n * @param {boolean} [numberValid=false] Whether scalars are compatible for the operation.\n */\nfunction checkCompatibility (o, dim, numberValid = false) {\n  if (numberValid && type(o) === 'Number') {\n    return\n  } else if (o.length && o.length === dim) {\n    return\n  }\n  throw new TypeError(`Invalid argument. Input must have matching dimension${numberValid ? 'or be a scalar' : ''}.`)\n}\n\n/**\n * Removes outer arrays and returns a reference to the innermost array. For\n * example, [[1, 2]] becomes [1, 2]. [[[['a'], true]]] becomes [['a'], true].\n * @private\n * @param {Array} arr The array to flatten.\n *\n * @returns {Array} A reference to the innermost array in arr.\n */\nfunction flattenOuter (arr) {\n  if (!(arr instanceof Array) || arr.length !== 1) {\n    return arr\n  }\n  if (arr[0] instanceof Array) {\n    return flattenOuter(arr[0])\n  }\n  return arr\n}\n\n/**\n * Checks whether a provided string can be used as a valid index into an array.\n * @private\n * @param {string} n A string representation of the number in question.\n *\n * @returns {boolean} True if n can be used to index an array.\n */\nfunction isIndex (n) {\n  return !isNaN(n) &&\n         Number(n).toString() === n &&\n         Number.isInteger(Number(n)) &&\n         Number(n) >= 0\n}\n\n/**\n * Lengthens an exsting array and fills new entries with 0 (does not mutate).\n * @private\n * @param {Array} arr The source array.\n * @param {number} dim The dimension of the new array.\n *\n * @returns {Array} A new array with length dim and arr as a prefix.\n */\nfunction promoteArrayDimension (arr, dim) {\n  return [...Array(dim)].map((_, i) => i < arr.length ? arr[i] : 0)\n}\n\n/**\n * Returns a string representing the type of an object. Similar to typeof, but\n * better with wrapped primitives, null, Array, etc...\n * @private\n * @param {*} obj The object to check the type of.\n *\n * @returns {string} A capitalized string describing the perceived type (i.e. 'Number', 'Array', etc...)\n */\nfunction type (obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1)\n}\n\nmodule.exports = {\n  getVecType,\n  isVec,\n  vec2: vecTypes[2],\n  vec3: vecTypes[3],\n  vec4: vecTypes[4],\n\n  add,\n  multiply,\n  lerp,\n  slerp\n}\n", "'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "var resizeObservers = [];\nexport { resizeObservers };\n", "import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n", "import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n", "var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n", "var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n", "export var freeze = function (obj) { return Object.freeze(obj); };\n", "import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n", "import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n", "var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n", "export var global = typeof window !== 'undefined' ? window : {};\n", "import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n", "import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n", "import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n", "import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n", "import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n", "import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n", "var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n", "import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n", "import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n", "import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n", "var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n", "import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n", "import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n", "import * as React from \"react\";\nimport type { IntersectionObserverProps, PlainChildrenProps } from \"./index\";\nimport { observe } from \"./observe\";\n\ntype State = {\n  inView: boolean;\n  entry?: IntersectionObserverEntry;\n};\n\nfunction isPlainChildren(\n  props: IntersectionObserverProps | PlainChildrenProps,\n): props is PlainChildrenProps {\n  return typeof props.children !== \"function\";\n}\n\n/**\n ## Render props\n\n To use the `<InView>` component, you pass it a function. It will be called\n whenever the state changes, with the new value of `inView`. In addition to the\n `inView` prop, children also receive a `ref` that should be set on the\n containing DOM element. This is the element that the IntersectionObserver will\n monitor.\n\n If you need it, you can also access the\n [`IntersectionObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry)\n on `entry`, giving you access to all the details about the current intersection\n state.\n\n ```jsx\n import { InView } from 'react-intersection-observer';\n\n const Component = () => (\n <InView>\n {({ inView, ref, entry }) => (\n      <div ref={ref}>\n        <h2>{`Header inside viewport ${inView}.`}</h2>\n      </div>\n    )}\n </InView>\n );\n\n export default Component;\n ```\n\n ## Plain children\n\n You can pass any element to the `<InView />`, and it will handle creating the\n wrapping DOM element. Add a handler to the `onChange` method, and control the\n state in your own component. Any extra props you add to `<InView>` will be\n passed to the HTML element, allowing you set the `className`, `style`, etc.\n\n ```jsx\n import { InView } from 'react-intersection-observer';\n\n const Component = () => (\n <InView as=\"div\" onChange={(inView, entry) => console.log('Inview:', inView)}>\n <h2>Plain children are always rendered. Use onChange to monitor state.</h2>\n </InView>\n );\n\n export default Component;\n ```\n */\nexport class InView extends React.Component<\n  IntersectionObserverProps | PlainChildrenProps,\n  State\n> {\n  node: Element | null = null;\n  _unobserveCb: (() => void) | null = null;\n\n  constructor(props: IntersectionObserverProps | PlainChildrenProps) {\n    super(props);\n    this.state = {\n      inView: !!props.initialInView,\n      entry: undefined,\n    };\n  }\n\n  componentDidMount() {\n    this.unobserve();\n    this.observeNode();\n  }\n\n  componentDidUpdate(prevProps: IntersectionObserverProps) {\n    // If a IntersectionObserver option changed, reinit the observer\n    if (\n      prevProps.rootMargin !== this.props.rootMargin ||\n      prevProps.root !== this.props.root ||\n      prevProps.threshold !== this.props.threshold ||\n      prevProps.skip !== this.props.skip ||\n      prevProps.trackVisibility !== this.props.trackVisibility ||\n      prevProps.delay !== this.props.delay\n    ) {\n      this.unobserve();\n      this.observeNode();\n    }\n  }\n\n  componentWillUnmount() {\n    this.unobserve();\n  }\n\n  observeNode() {\n    if (!this.node || this.props.skip) return;\n    const {\n      threshold,\n      root,\n      rootMargin,\n      trackVisibility,\n      delay,\n      fallbackInView,\n    } = this.props;\n\n    this._unobserveCb = observe(\n      this.node,\n      this.handleChange,\n      {\n        threshold,\n        root,\n        rootMargin,\n        // @ts-ignore\n        trackVisibility,\n        // @ts-ignore\n        delay,\n      },\n      fallbackInView,\n    );\n  }\n\n  unobserve() {\n    if (this._unobserveCb) {\n      this._unobserveCb();\n      this._unobserveCb = null;\n    }\n  }\n\n  handleNode = (node?: Element | null) => {\n    if (this.node) {\n      // Clear the old observer, before we start observing a new element\n      this.unobserve();\n\n      if (!node && !this.props.triggerOnce && !this.props.skip) {\n        // Reset the state if we get a new node, and we aren't ignoring updates\n        this.setState({ inView: !!this.props.initialInView, entry: undefined });\n      }\n    }\n\n    this.node = node ? node : null;\n    this.observeNode();\n  };\n\n  handleChange = (inView: boolean, entry: IntersectionObserverEntry) => {\n    if (inView && this.props.triggerOnce) {\n      // If `triggerOnce` is true, we should stop observing the element.\n      this.unobserve();\n    }\n    if (!isPlainChildren(this.props)) {\n      // Store the current State, so we can pass it to the children in the next render update\n      // There's no reason to update the state for plain children, since it's not used in the rendering.\n      this.setState({ inView, entry });\n    }\n    if (this.props.onChange) {\n      // If the user is actively listening for onChange, always trigger it\n      this.props.onChange(inView, entry);\n    }\n  };\n\n  render() {\n    const { children } = this.props;\n    if (typeof children === \"function\") {\n      const { inView, entry } = this.state;\n      return children({ inView, entry, ref: this.handleNode });\n    }\n\n    const {\n      as,\n      triggerOnce,\n      threshold,\n      root,\n      rootMargin,\n      onChange,\n      skip,\n      trackVisibility,\n      delay,\n      initialInView,\n      fallbackInView,\n      ...props\n    } = this.props as PlainChildrenProps;\n\n    return React.createElement(\n      as || \"div\",\n      { ref: this.handleNode, ...props },\n      children,\n    );\n  }\n}\n", "import type { ObserverInstanceCallback } from \"./index\";\n\nconst observerMap = new Map<\n  string,\n  {\n    id: string;\n    observer: IntersectionObserver;\n    elements: Map<Element, Array<ObserverInstanceCallback>>;\n  }\n>();\n\nconst RootIds: WeakMap<Element | Document, string> = new WeakMap();\nlet rootId = 0;\n\nlet unsupportedValue: boolean | undefined = undefined;\n\n/**\n * What should be the default behavior if the IntersectionObserver is unsupported?\n * Ideally the polyfill has been loaded, you can have the following happen:\n * - `undefined`: Throw an error\n * - `true` or `false`: Set the `inView` value to this regardless of intersection state\n * **/\nexport function defaultFallbackInView(inView: boolean | undefined) {\n  unsupportedValue = inView;\n}\n\n/**\n * Generate a unique ID for the root element\n * @param root\n */\nfunction getRootId(root: IntersectionObserverInit[\"root\"]) {\n  if (!root) return \"0\";\n  if (RootIds.has(root)) return RootIds.get(root);\n  rootId += 1;\n  RootIds.set(root, rootId.toString());\n  return RootIds.get(root);\n}\n\n/**\n * Convert the options to a string Id, based on the values.\n * Ensures we can reuse the same observer when observing elements with the same options.\n * @param options\n */\nexport function optionsToId(options: IntersectionObserverInit) {\n  return Object.keys(options)\n    .sort()\n    .filter(\n      (key) => options[key as keyof IntersectionObserverInit] !== undefined,\n    )\n    .map((key) => {\n      return `${key}_${\n        key === \"root\"\n          ? getRootId(options.root)\n          : options[key as keyof IntersectionObserverInit]\n      }`;\n    })\n    .toString();\n}\n\nfunction createObserver(options: IntersectionObserverInit) {\n  // Create a unique ID for this observer instance, based on the root, root margin and threshold.\n  const id = optionsToId(options);\n  let instance = observerMap.get(id);\n\n  if (!instance) {\n    // Create a map of elements this observer is going to observe. Each element has a list of callbacks that should be triggered, once it comes into view.\n    const elements = new Map<Element, Array<ObserverInstanceCallback>>();\n    // biome-ignore lint/style/useConst: It's fine to use let here, as we are going to assign it later\n    let thresholds: number[] | readonly number[];\n\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        // While it would be nice if you could just look at isIntersecting to determine if the component is inside the viewport, browsers can't agree on how to use it.\n        // -Firefox ignores `threshold` when considering `isIntersecting`, so it will never be false again if `threshold` is > 0\n        const inView =\n          entry.isIntersecting &&\n          thresholds.some((threshold) => entry.intersectionRatio >= threshold);\n\n        // @ts-ignore support IntersectionObserver v2\n        if (options.trackVisibility && typeof entry.isVisible === \"undefined\") {\n          // The browser doesn't support Intersection Observer v2, falling back to v1 behavior.\n          // @ts-ignore\n          entry.isVisible = inView;\n        }\n\n        elements.get(entry.target)?.forEach((callback) => {\n          callback(inView, entry);\n        });\n      });\n    }, options);\n\n    // Ensure we have a valid thresholds array. If not, use the threshold from the options\n    thresholds =\n      observer.thresholds ||\n      (Array.isArray(options.threshold)\n        ? options.threshold\n        : [options.threshold || 0]);\n\n    instance = {\n      id,\n      observer,\n      elements,\n    };\n\n    observerMap.set(id, instance);\n  }\n\n  return instance;\n}\n\n/**\n * @param element - DOM Element to observe\n * @param callback - Callback function to trigger when intersection status changes\n * @param options - Intersection Observer options\n * @param fallbackInView - Fallback inView value.\n * @return Function - Cleanup function that should be triggered to unregister the observer\n */\nexport function observe(\n  element: Element,\n  callback: ObserverInstanceCallback,\n  options: IntersectionObserverInit = {},\n  fallbackInView = unsupportedValue,\n) {\n  if (\n    typeof window.IntersectionObserver === \"undefined\" &&\n    fallbackInView !== undefined\n  ) {\n    const bounds = element.getBoundingClientRect();\n    callback(fallbackInView, {\n      isIntersecting: fallbackInView,\n      target: element,\n      intersectionRatio:\n        typeof options.threshold === \"number\" ? options.threshold : 0,\n      time: 0,\n      boundingClientRect: bounds,\n      intersectionRect: bounds,\n      rootBounds: bounds,\n    });\n    return () => {\n      // Nothing to cleanup\n    };\n  }\n  // An observer with the same options can be reused, so lets use this fact\n  const { id, observer, elements } = createObserver(options);\n\n  // Register the callback listener for this element\n  const callbacks = elements.get(element) || [];\n  if (!elements.has(element)) {\n    elements.set(element, callbacks);\n  }\n\n  callbacks.push(callback);\n  observer.observe(element);\n\n  return function unobserve() {\n    // Remove the callback from the callback list\n    callbacks.splice(callbacks.indexOf(callback), 1);\n\n    if (callbacks.length === 0) {\n      // No more callback exists for element, so destroy it\n      elements.delete(element);\n      observer.unobserve(element);\n    }\n\n    if (elements.size === 0) {\n      // No more elements are being observer by this instance, so destroy it\n      observer.disconnect();\n      observerMap.delete(id);\n    }\n  };\n}\n", "import * as React from \"react\";\nimport type { InViewHookResponse, IntersectionOptions } from \"./index\";\nimport { observe } from \"./observe\";\n\ntype State = {\n  inView: boolean;\n  entry?: IntersectionObserverEntry;\n};\n\n/**\n * React Hooks make it easy to monitor the `inView` state of your components. Call\n * the `useInView` hook with the (optional) [options](#options) you need. It will\n * return an array containing a `ref`, the `inView` status and the current\n * [`entry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry).\n * Assign the `ref` to the DOM element you want to monitor, and the hook will\n * report the status.\n *\n * @example\n * ```jsx\n * import React from 'react';\n * import { useInView } from 'react-intersection-observer';\n *\n * const Component = () => {\n *   const { ref, inView, entry } = useInView({\n *       threshold: 0,\n *   });\n *\n *   return (\n *     <div ref={ref}>\n *       <h2>{`Header inside viewport ${inView}.`}</h2>\n *     </div>\n *   );\n * };\n * ```\n */\nexport function useInView({\n  threshold,\n  delay,\n  trackVisibility,\n  rootMargin,\n  root,\n  triggerOnce,\n  skip,\n  initialInView,\n  fallbackInView,\n  onChange,\n}: IntersectionOptions = {}): InViewHookResponse {\n  const [ref, setRef] = React.useState<Element | null>(null);\n  const callback = React.useRef<IntersectionOptions[\"onChange\"]>(onChange);\n  const [state, setState] = React.useState<State>({\n    inView: !!initialInView,\n    entry: undefined,\n  });\n\n  // Store the onChange callback in a `ref`, so we can access the latest instance\n  // inside the `useEffect`, but without triggering a rerender.\n  callback.current = onChange;\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: threshold is not correctly detected as a dependency\n  React.useEffect(\n    () => {\n      // Ensure we have node ref, and that we shouldn't skip observing\n      if (skip || !ref) return;\n\n      let unobserve: (() => void) | undefined;\n      unobserve = observe(\n        ref,\n        (inView, entry) => {\n          setState({\n            inView,\n            entry,\n          });\n          if (callback.current) callback.current(inView, entry);\n\n          if (entry.isIntersecting && triggerOnce && unobserve) {\n            // If it should only trigger once, unobserve the element after it's inView\n            unobserve();\n            unobserve = undefined;\n          }\n        },\n        {\n          root,\n          rootMargin,\n          threshold,\n          // @ts-ignore\n          trackVisibility,\n          // @ts-ignore\n          delay,\n        },\n        fallbackInView,\n      );\n\n      return () => {\n        if (unobserve) {\n          unobserve();\n        }\n      };\n    },\n    // We break the rule here, because we aren't including the actual `threshold` variable\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      // If the threshold is an array, convert it to a string, so it won't change between renders.\n      Array.isArray(threshold) ? threshold.toString() : threshold,\n      ref,\n      root,\n      rootMargin,\n      triggerOnce,\n      skip,\n      trackVisibility,\n      fallbackInView,\n      delay,\n    ],\n  );\n\n  const entryTarget = state.entry?.target;\n  const previousEntryTarget = React.useRef<Element | undefined>(undefined);\n  if (\n    !ref &&\n    entryTarget &&\n    !triggerOnce &&\n    !skip &&\n    previousEntryTarget.current !== entryTarget\n  ) {\n    // If we don't have a node ref, then reset the state (unless the hook is set to only `triggerOnce` or `skip`)\n    // This ensures we correctly reflect the current state - If you aren't observing anything, then nothing is inView\n    previousEntryTarget.current = entryTarget;\n    setState({\n      inView: !!initialInView,\n      entry: undefined,\n    });\n  }\n\n  const result = [setRef, state.inView, state.entry] as InViewHookResponse;\n\n  // Support object destructuring, by adding the specific values.\n  result.ref = result[0];\n  result.inView = result[1];\n  result.entry = result[2];\n\n  return result;\n}\n", "function shallowEqualArrays(arrA, arrB, equal = (a, b) => a === b) {\n  if (arrA === arrB) return true;\n  if (!arrA || !arrB) return false;\n  const len = arrA.length;\n  if (arrB.length !== len) return false;\n\n  for (let i = 0; i < len; i++) if (!equal(arrA[i], arrB[i])) return false;\n\n  return true;\n}\n\nconst globalCache = [];\n\nfunction query(fn, keys, preload = false, config = {}) {\n  for (const entry of globalCache) {\n    // Find a match\n    if (shallowEqualArrays(keys, entry.keys, entry.equal)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return undefined; // If an error occurred, throw\n\n      if (Object.prototype.hasOwnProperty.call(entry, 'error')) throw entry.error; // If a response was successful, return\n\n      if (Object.prototype.hasOwnProperty.call(entry, 'response')) return entry.response; // If the promise is still unresolved, throw\n\n      if (!preload) throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n\n  const entry = {\n    keys,\n    equal: config.equal,\n    promise: // Execute the promise\n    fn(...keys) // When it resolves, store its value\n    .then(response => entry.response = response) // Remove the entry if a lifespan was given\n    .then(() => {\n      if (config.lifespan && config.lifespan > 0) {\n        setTimeout(() => {\n          const index = globalCache.indexOf(entry);\n          if (index !== -1) globalCache.splice(index, 1);\n        }, config.lifespan);\n      }\n    }) // Store caught errors, they will be thrown in the render-phase to bubble into an error-bound\n    .catch(error => entry.error = error)\n  }; // Register the entry\n\n  globalCache.push(entry); // And throw the promise, this yields control back to React\n\n  if (!preload) throw entry.promise;\n  return undefined;\n}\n\nconst suspend = (fn, keys, config) => query(fn, keys, false, config);\n\nconst preload = (fn, keys, config) => void query(fn, keys, true, config);\n\nconst peek = keys => {\n  var _globalCache$find;\n\n  return (_globalCache$find = globalCache.find(entry => shallowEqualArrays(keys, entry.keys, entry.equal))) == null ? void 0 : _globalCache$find.response;\n};\n\nconst clear = keys => {\n  if (keys === undefined || keys.length === 0) globalCache.splice(0, globalCache.length);else {\n    const entry = globalCache.find(entry => shallowEqualArrays(keys, entry.keys, entry.equal));\n\n    if (entry) {\n      const index = globalCache.indexOf(entry);\n      if (index !== -1) globalCache.splice(index, 1);\n    }\n  }\n};\n\nexport { clear, peek, preload, suspend };\n", "export default new Promise(resolve => {\n\tconst image = new Image();\n\timage.addEventListener('error', () => resolve(false));\n\timage.addEventListener('load', () => resolve(image.width === 1));\n\timage.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=';\n}).catch(() => false);\n", "{\n  \"name\": \"lenis\",\n  \"version\": \"1.3.11\",\n  \"description\": \"How smooth scroll should be\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"author\": \"darkroom.engineering\",\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/darkroomengineering/lenis.git\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/darkroomengineering/lenis/issues\"\n  },\n  \"homepage\": \"https://github.com/darkroomengineering/lenis\",\n  \"funding\": {\n    \"type\": \"github\",\n    \"url\": \"https://github.com/sponsors/darkroomengineering\"\n  },\n  \"keywords\": [\n    \"scroll\",\n    \"smooth\",\n    \"lenis\",\n    \"react\",\n    \"vue\"\n  ],\n  \"scripts\": {\n    \"build\": \"pnpm build:core && pnpm build:all\",\n    \"build:core\": \"tsup --config tsup.core.ts\",\n    \"build:all\": \"tsup\",\n    \"dev\": \"pnpm run -w --parallel /^dev:.*/\",\n    \"dev:build\": \"tsup --watch\",\n    \"dev:playground\": \"pnpm --filter playground dev\",\n    \"dev:nuxt\": \"pnpm --filter playground-nuxt dev\",\n    \"readme\": \"node ./scripts/update-readme.js\",\n    \"version:dev\": \"npm version prerelease --preid dev --force --no-git-tag-version\",\n    \"version:patch\": \"npm version patch --force --no-git-tag-version\",\n    \"version:minor\": \"npm version minor --force --no-git-tag-version\",\n    \"version:major\": \"npm version major --force --no-git-tag-version\",\n    \"postversion\": \"pnpm build && pnpm readme\",\n    \"publish:dev\": \"npm publish --tag dev\",\n    \"publish:main\": \"npm publish\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"devDependencies\": {\n    \"terser\": \"^5.37.0\",\n    \"tsup\": \"^8.3.5\",\n    \"typescript\": \"^5.7.3\"\n  },\n  \"peerDependencies\": {\n    \"react\": \">=17.0.0\",\n    \"vue\": \">=3.0.0\",\n    \"@nuxt/kit\": \">=3.0.0\"\n  },\n  \"peerDependenciesMeta\": {\n    \"react\": {\n      \"optional\": true\n    },\n    \"vue\": {\n      \"optional\": true\n    },\n    \"@nuxt/kit\": {\n      \"optional\": true\n    }\n  },\n  \"unpkg\": \"./dist/lenis.mjs\",\n  \"main\": \"./dist/lenis.mjs\",\n  \"module\": \"./dist/lenis.mjs\",\n  \"types\": \"./dist/lenis.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/lenis.d.ts\",\n      \"default\": \"./dist/lenis.mjs\"\n    },\n    \"./react\": {\n      \"types\": \"./dist/lenis-react.d.ts\",\n      \"default\": \"./dist/lenis-react.mjs\"\n    },\n    \"./snap\": {\n      \"types\": \"./dist/lenis-snap.d.ts\",\n      \"default\": \"./dist/lenis-snap.mjs\"\n    },\n    \"./vue\": {\n      \"types\": \"./dist/lenis-vue.d.ts\",\n      \"default\": \"./dist/lenis-vue.mjs\"\n    },\n    \"./nuxt\": {\n      \"default\": \"./dist/lenis-vue-nuxt.mjs\"\n    },\n    \"./nuxt/runtime/*\": {\n      \"default\": \"./dist/nuxt/runtime/*.mjs\"\n    },\n    \"./dist/*\": \"./dist/*\"\n  }\n}\n", "/**\r\n * Clamp a value between a minimum and maximum value\r\n *\r\n * @param min Minimum value\r\n * @param input Value to clamp\r\n * @param max Maximum value\r\n * @returns Clamped value\r\n */\r\nexport function clamp(min: number, input: number, max: number) {\r\n  return Math.max(min, Math.min(input, max))\r\n}\r\n\r\n/**\r\n * Truncate a floating-point number to a specified number of decimal places\r\n *\r\n * @param value Value to truncate\r\n * @param decimals Number of decimal places to truncate to\r\n * @returns Truncated value\r\n */\r\nexport function truncate(value: number, decimals = 0) {\r\n  return parseFloat(value.toFixed(decimals))\r\n}\r\n\r\n/**\r\n *  Linearly interpolate between two values using an amount (0 <= t <= 1)\r\n *\r\n * @param x First value\r\n * @param y Second value\r\n * @param t Amount to interpolate (0 <= t <= 1)\r\n * @returns Interpolated value\r\n */\r\nexport function lerp(x: number, y: number, t: number) {\r\n  return (1 - t) * x + t * y\r\n}\r\n\r\n/**\r\n * Damp a value over time using a damping factor\r\n * {@link http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/}\r\n *\r\n * @param x Initial value\r\n * @param y Target value\r\n * @param lambda Damping factor\r\n * @param dt Time elapsed since the last update\r\n * @returns Damped value\r\n */\r\nexport function damp(x: number, y: number, lambda: number, deltaTime: number) {\r\n  return lerp(x, y, 1 - Math.exp(-lambda * deltaTime))\r\n}\r\n\r\n/**\r\n * Calculate the modulo of the dividend and divisor while keeping the result within the same sign as the divisor\r\n * {@link https://anguscroll.com/just/just-modulo}\r\n *\r\n * @param n Dividend\r\n * @param d Divisor\r\n * @returns Modulo\r\n */\r\nexport function modulo(n: number, d: number) {\r\n  return ((n % d) + d) % d\r\n}\r\n", "import { clamp, damp } from './maths'\r\nimport type { EasingFunction, FromToOptions, OnUpdateCallback } from './types'\r\n\r\n/**\r\n * Animate class to handle value animations with lerping or easing\r\n *\r\n * @example\r\n * const animate = new Animate()\r\n * animate.fromTo(0, 100, { duration: 1, easing: (t) => t })\r\n * animate.advance(0.5) // 50\r\n */\r\nexport class Animate {\r\n  isRunning = false\r\n  value = 0\r\n  from = 0\r\n  to = 0\r\n  currentTime = 0\r\n\r\n  // These are instanciated in the fromTo method\r\n  lerp?: number\r\n  duration?: number\r\n  easing?: EasingFunction\r\n  onUpdate?: OnUpdateCallback\r\n\r\n  /**\r\n   * Advance the animation by the given delta time\r\n   *\r\n   * @param deltaTime - The time in seconds to advance the animation\r\n   */\r\n  advance(deltaTime: number) {\r\n    if (!this.isRunning) return\r\n\r\n    let completed = false\r\n\r\n    if (this.duration && this.easing) {\r\n      this.currentTime += deltaTime\r\n      const linearProgress = clamp(0, this.currentTime / this.duration, 1)\r\n\r\n      completed = linearProgress >= 1\r\n      const easedProgress = completed ? 1 : this.easing(linearProgress)\r\n      this.value = this.from + (this.to - this.from) * easedProgress\r\n    } else if (this.lerp) {\r\n      this.value = damp(this.value, this.to, this.lerp * 60, deltaTime)\r\n      if (Math.round(this.value) === this.to) {\r\n        this.value = this.to\r\n        completed = true\r\n      }\r\n    } else {\r\n      // If no easing or lerp, just jump to the end value\r\n      this.value = this.to\r\n      completed = true\r\n    }\r\n\r\n    if (completed) {\r\n      this.stop()\r\n    }\r\n\r\n    // Call the onUpdate callback with the current value and completed status\r\n    this.onUpdate?.(this.value, completed)\r\n  }\r\n\r\n  /** Stop the animation */\r\n  stop() {\r\n    this.isRunning = false\r\n  }\r\n\r\n  /**\r\n   * Set up the animation from a starting value to an ending value\r\n   * with optional parameters for lerping, duration, easing, and onUpdate callback\r\n   *\r\n   * @param from - The starting value\r\n   * @param to - The ending value\r\n   * @param options - Options for the animation\r\n   */\r\n  fromTo(\r\n    from: number,\r\n    to: number,\r\n    { lerp, duration, easing, onStart, onUpdate }: FromToOptions\r\n  ) {\r\n    this.from = this.value = from\r\n    this.to = to\r\n    this.lerp = lerp\r\n    this.duration = duration\r\n    this.easing = easing\r\n    this.currentTime = 0\r\n    this.isRunning = true\r\n\r\n    onStart?.()\r\n    this.onUpdate = onUpdate\r\n  }\r\n}\r\n", "export function debounce<CB extends (...args: any[]) => void>(\r\n  callback: CB,\r\n  delay: number\r\n) {\r\n  let timer: number | undefined\r\n  return function <T>(this: T, ...args: Parameters<typeof callback>) {\r\n    let context = this\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n      timer = undefined\r\n      callback.apply(context, args)\r\n    }, delay)\r\n  }\r\n}\r\n", "import { debounce } from './debounce'\r\n\r\n/**\r\n * Dimensions class to handle the size of the content and wrapper\r\n *\r\n * @example\r\n * const dimensions = new Dimensions(wrapper, content)\r\n * dimensions.on('resize', (e) => {\r\n *   console.log(e.width, e.height)\r\n * })\r\n */\r\nexport class Dimensions {\r\n  width = 0\r\n  height = 0\r\n  scrollHeight = 0\r\n  scrollWidth = 0\r\n\r\n  // These are instanciated in the constructor as they need information from the options\r\n  private debouncedResize?: (...args: unknown[]) => void\r\n  private wrapperResizeObserver?: ResizeObserver\r\n  private contentResizeObserver?: ResizeObserver\r\n\r\n  constructor(\r\n    private wrapper: HTMLElement | Window | Element,\r\n    private content: HTMLElement | Element,\r\n    { autoResize = true, debounce: debounceValue = 250 } = {}\r\n  ) {\r\n    if (autoResize) {\r\n      this.debouncedResize = debounce(this.resize, debounceValue)\r\n\r\n      if (this.wrapper instanceof Window) {\r\n        window.addEventListener('resize', this.debouncedResize, false)\r\n      } else {\r\n        this.wrapperResizeObserver = new ResizeObserver(this.debouncedResize)\r\n        this.wrapperResizeObserver.observe(this.wrapper)\r\n      }\r\n\r\n      this.contentResizeObserver = new ResizeObserver(this.debouncedResize)\r\n      this.contentResizeObserver.observe(this.content)\r\n    }\r\n\r\n    this.resize()\r\n  }\r\n\r\n  destroy() {\r\n    this.wrapperResizeObserver?.disconnect()\r\n    this.contentResizeObserver?.disconnect()\r\n\r\n    if (this.wrapper === window && this.debouncedResize) {\r\n      window.removeEventListener('resize', this.debouncedResize, false)\r\n    }\r\n  }\r\n\r\n  resize = () => {\r\n    this.onWrapperResize()\r\n    this.onContentResize()\r\n  }\r\n\r\n  onWrapperResize = () => {\r\n    if (this.wrapper instanceof Window) {\r\n      this.width = window.innerWidth\r\n      this.height = window.innerHeight\r\n    } else {\r\n      this.width = this.wrapper.clientWidth\r\n      this.height = this.wrapper.clientHeight\r\n    }\r\n  }\r\n\r\n  onContentResize = () => {\r\n    if (this.wrapper instanceof Window) {\r\n      this.scrollHeight = this.content.scrollHeight\r\n      this.scrollWidth = this.content.scrollWidth\r\n    } else {\r\n      this.scrollHeight = this.wrapper.scrollHeight\r\n      this.scrollWidth = this.wrapper.scrollWidth\r\n    }\r\n  }\r\n\r\n  get limit() {\r\n    return {\r\n      x: this.scrollWidth - this.width,\r\n      y: this.scrollHeight - this.height,\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * Emitter class to handle events\r\n * @example\r\n * const emitter = new Emitter()\r\n * emitter.on('event', (data) => {\r\n *   console.log(data)\r\n * })\r\n * emitter.emit('event', 'data')\r\n */\r\nexport class Emitter {\r\n  private events: Record<\r\n    string,\r\n    Array<(...args: unknown[]) => void> | undefined\r\n  > = {}\r\n\r\n  /**\r\n   * Emit an event with the given data\r\n   * @param event Event name\r\n   * @param args Data to pass to the event handlers\r\n   */\r\n  emit(event: string, ...args: unknown[]) {\r\n    let callbacks = this.events[event] || []\r\n    for (let i = 0, length = callbacks.length; i < length; i++) {\r\n      callbacks[i]?.(...args)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a callback to the event\r\n   * @param event Event name\r\n   * @param cb Callback function\r\n   * @returns Unsubscribe function\r\n   */\r\n  on<CB extends (...args: any[]) => void>(event: string, cb: CB) {\r\n    // Add the callback to the event's callback list, or create a new list with the callback\r\n    this.events[event]?.push(cb) || (this.events[event] = [cb])\r\n\r\n    // Return an unsubscribe function\r\n    return () => {\r\n      this.events[event] = this.events[event]?.filter((i) => cb !== i)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a callback from the event\r\n   * @param event Event name\r\n   * @param callback Callback function\r\n   */\r\n  off<CB extends (...args: any[]) => void>(event: string, callback: CB) {\r\n    this.events[event] = this.events[event]?.filter((i) => callback !== i)\r\n  }\r\n\r\n  /**\r\n   * Remove all event listeners and clean up\r\n   */\r\n  destroy() {\r\n    this.events = {}\r\n  }\r\n}\r\n", "import { Emitter } from './emitter'\r\nimport type { VirtualScrollCallback } from './types'\r\n\r\nconst LINE_HEIGHT = 100 / 6\r\nconst listenerOptions: AddEventListenerOptions = { passive: false }\r\n\r\nexport class VirtualScroll {\r\n  touchStart = {\r\n    x: 0,\r\n    y: 0,\r\n  }\r\n  lastDelta = {\r\n    x: 0,\r\n    y: 0,\r\n  }\r\n  window = {\r\n    width: 0,\r\n    height: 0,\r\n  }\r\n  private emitter = new Emitter()\r\n\r\n  constructor(\r\n    private element: HTMLElement,\r\n    private options = { wheelMultiplier: 1, touchMultiplier: 1 }\r\n  ) {\r\n    window.addEventListener('resize', this.onWindowResize, false)\r\n    this.onWindowResize()\r\n\r\n    this.element.addEventListener('wheel', this.onWheel, listenerOptions)\r\n    this.element.addEventListener(\r\n      'touchstart',\r\n      this.onTouchStart,\r\n      listenerOptions\r\n    )\r\n    this.element.addEventListener(\r\n      'touchmove',\r\n      this.onTouchMove,\r\n      listenerOptions\r\n    )\r\n    this.element.addEventListener('touchend', this.onTouchEnd, listenerOptions)\r\n  }\r\n\r\n  /**\r\n   * Add an event listener for the given event and callback\r\n   *\r\n   * @param event Event name\r\n   * @param callback Callback function\r\n   */\r\n  on(event: string, callback: VirtualScrollCallback) {\r\n    return this.emitter.on(event, callback)\r\n  }\r\n\r\n  /** Remove all event listeners and clean up */\r\n  destroy() {\r\n    this.emitter.destroy()\r\n\r\n    window.removeEventListener('resize', this.onWindowResize, false)\r\n\r\n    this.element.removeEventListener('wheel', this.onWheel, listenerOptions)\r\n    this.element.removeEventListener(\r\n      'touchstart',\r\n      this.onTouchStart,\r\n      listenerOptions\r\n    )\r\n    this.element.removeEventListener(\r\n      'touchmove',\r\n      this.onTouchMove,\r\n      listenerOptions\r\n    )\r\n    this.element.removeEventListener(\r\n      'touchend',\r\n      this.onTouchEnd,\r\n      listenerOptions\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Event handler for 'touchstart' event\r\n   *\r\n   * @param event Touch event\r\n   */\r\n  onTouchStart = (event: TouchEvent) => {\r\n    // @ts-expect-error - event.targetTouches is not defined\r\n    const { clientX, clientY } = event.targetTouches\r\n      ? event.targetTouches[0]\r\n      : event\r\n\r\n    this.touchStart.x = clientX\r\n    this.touchStart.y = clientY\r\n\r\n    this.lastDelta = {\r\n      x: 0,\r\n      y: 0,\r\n    }\r\n\r\n    this.emitter.emit('scroll', {\r\n      deltaX: 0,\r\n      deltaY: 0,\r\n      event,\r\n    })\r\n  }\r\n\r\n  /** Event handler for 'touchmove' event */\r\n  onTouchMove = (event: TouchEvent) => {\r\n    // @ts-expect-error - event.targetTouches is not defined\r\n    const { clientX, clientY } = event.targetTouches\r\n      ? event.targetTouches[0]\r\n      : event\r\n\r\n    const deltaX = -(clientX - this.touchStart.x) * this.options.touchMultiplier\r\n    const deltaY = -(clientY - this.touchStart.y) * this.options.touchMultiplier\r\n\r\n    this.touchStart.x = clientX\r\n    this.touchStart.y = clientY\r\n\r\n    this.lastDelta = {\r\n      x: deltaX,\r\n      y: deltaY,\r\n    }\r\n\r\n    this.emitter.emit('scroll', {\r\n      deltaX,\r\n      deltaY,\r\n      event,\r\n    })\r\n  }\r\n\r\n  onTouchEnd = (event: TouchEvent) => {\r\n    this.emitter.emit('scroll', {\r\n      deltaX: this.lastDelta.x,\r\n      deltaY: this.lastDelta.y,\r\n      event,\r\n    })\r\n  }\r\n\r\n  /** Event handler for 'wheel' event */\r\n  onWheel = (event: WheelEvent) => {\r\n    let { deltaX, deltaY, deltaMode } = event\r\n\r\n    const multiplierX =\r\n      deltaMode === 1 ? LINE_HEIGHT : deltaMode === 2 ? this.window.width : 1\r\n    const multiplierY =\r\n      deltaMode === 1 ? LINE_HEIGHT : deltaMode === 2 ? this.window.height : 1\r\n\r\n    deltaX *= multiplierX\r\n    deltaY *= multiplierY\r\n\r\n    deltaX *= this.options.wheelMultiplier\r\n    deltaY *= this.options.wheelMultiplier\r\n\r\n    this.emitter.emit('scroll', { deltaX, deltaY, event })\r\n  }\r\n\r\n  onWindowResize = () => {\r\n    this.window = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    }\r\n  }\r\n}\r\n", "import { version } from '../../../package.json'\nimport { Animate } from './animate'\nimport { Dimensions } from './dimensions'\nimport { Emitter } from './emitter'\nimport { clamp, modulo } from './maths'\nimport type {\n  LenisEvent,\n  LenisOptions,\n  ScrollCallback,\n  Scrolling,\n  ScrollToOptions,\n  UserData,\n  VirtualScrollCallback,\n  VirtualScrollData,\n} from './types'\nimport { VirtualScroll } from './virtual-scroll'\n\n// Technical explanation\n// - listen to 'wheel' events\n// - prevent 'wheel' event to prevent scroll\n// - normalize wheel delta\n// - add delta to targetScroll\n// - animate scroll to targetScroll (smooth context)\n// - if animation is not running, listen to 'scroll' events (native context)\n\ntype OptionalPick<T, F extends keyof T> = Omit<T, F> & Partial<Pick<T, F>>\n\nconst defaultEasing = (t: number) => Math.min(1, 1.001 - Math.pow(2, -10 * t))\n\nexport class Lenis {\n  private _isScrolling: Scrolling = false // true when scroll is animating\n  private _isStopped = false // true if user should not be able to scroll - enable/disable programmatically\n  private _isLocked = false // same as isStopped but enabled/disabled when scroll reaches target\n  private _preventNextNativeScrollEvent = false\n  private _resetVelocityTimeout: ReturnType<typeof setTimeout> | null = null\n  private __rafID: number | null = null\n\n  /**\n   * Whether or not the user is touching the screen\n   */\n  isTouching?: boolean\n  /**\n   * The time in ms since the lenis instance was created\n   */\n  time = 0\n  /**\n   * User data that will be forwarded through the scroll event\n   *\n   * @example\n   * lenis.scrollTo(100, {\n   *   userData: {\n   *     foo: 'bar'\n   *   }\n   * })\n   */\n  userData: UserData = {}\n  /**\n   * The last velocity of the scroll\n   */\n  lastVelocity = 0\n  /**\n   * The current velocity of the scroll\n   */\n  velocity = 0\n  /**\n   * The direction of the scroll\n   */\n  direction: 1 | -1 | 0 = 0\n  /**\n   * The options passed to the lenis instance\n   */\n  options: OptionalPick<\n    Required<LenisOptions>,\n    'duration' | 'easing' | 'prevent' | 'virtualScroll'\n  >\n  /**\n   * The target scroll value\n   */\n  targetScroll: number\n  /**\n   * The animated scroll value\n   */\n  animatedScroll: number\n\n  // These are instanciated here as they don't need information from the options\n  private readonly animate = new Animate()\n  private readonly emitter = new Emitter()\n  // These are instanciated in the constructor as they need information from the options\n  readonly dimensions: Dimensions // This is not private because it's used in the Snap class\n  private readonly virtualScroll: VirtualScroll\n\n  constructor({\n    wrapper = window,\n    content = document.documentElement,\n    eventsTarget = wrapper,\n    smoothWheel = true,\n    syncTouch = false,\n    syncTouchLerp = 0.075,\n    touchInertiaExponent = 1.7,\n    duration, // in seconds\n    easing,\n    lerp = 0.1,\n    infinite = false,\n    orientation = 'vertical', // vertical, horizontal\n    gestureOrientation = orientation === 'horizontal' ? 'both' : 'vertical', // vertical, horizontal, both\n    touchMultiplier = 1,\n    wheelMultiplier = 1,\n    autoResize = true,\n    prevent,\n    virtualScroll,\n    overscroll = true,\n    autoRaf = false,\n    anchors = false,\n    autoToggle = false, // https://caniuse.com/?search=transition-behavior\n    allowNestedScroll = false,\n    __experimental__naiveDimensions = false,\n  }: LenisOptions = {}) {\n    // Set version\n    window.lenisVersion = version\n\n    // Check if wrapper is <html>, fallback to window\n    if (!wrapper || wrapper === document.documentElement) {\n      wrapper = window\n    }\n\n    // flip to easing/time based animation if at least one of them is provided\n    if (typeof duration === 'number' && typeof easing !== 'function') {\n      easing = defaultEasing\n    } else if (typeof easing === 'function' && typeof duration !== 'number') {\n      duration = 1\n    }\n\n    // Setup options\n    this.options = {\n      wrapper,\n      content,\n      eventsTarget,\n      smoothWheel,\n      syncTouch,\n      syncTouchLerp,\n      touchInertiaExponent,\n      duration,\n      easing,\n      lerp,\n      infinite,\n      gestureOrientation,\n      orientation,\n      touchMultiplier,\n      wheelMultiplier,\n      autoResize,\n      prevent,\n      virtualScroll,\n      overscroll,\n      autoRaf,\n      anchors,\n      autoToggle,\n      allowNestedScroll,\n      __experimental__naiveDimensions,\n    }\n\n    // Setup dimensions instance\n    this.dimensions = new Dimensions(wrapper, content, { autoResize })\n\n    // Setup class name\n    this.updateClassName()\n\n    // Set the initial scroll value for all scroll information\n    this.targetScroll = this.animatedScroll = this.actualScroll\n\n    // Add event listeners\n    this.options.wrapper.addEventListener('scroll', this.onNativeScroll, false)\n\n    this.options.wrapper.addEventListener('scrollend', this.onScrollEnd, {\n      capture: true,\n    })\n\n    if (this.options.anchors && this.options.wrapper === window) {\n      this.options.wrapper.addEventListener(\n        'click',\n        this.onClick as EventListener,\n        false\n      )\n    }\n\n    this.options.wrapper.addEventListener(\n      'pointerdown',\n      this.onPointerDown as EventListener,\n      false\n    )\n\n    // Setup virtual scroll instance\n    this.virtualScroll = new VirtualScroll(eventsTarget as HTMLElement, {\n      touchMultiplier,\n      wheelMultiplier,\n    })\n    this.virtualScroll.on('scroll', this.onVirtualScroll)\n\n    if (this.options.autoToggle) {\n      this.rootElement.addEventListener('transitionend', this.onTransitionEnd, {\n        passive: true,\n      })\n    }\n\n    if (this.options.autoRaf) {\n      this.__rafID = requestAnimationFrame(this.raf)\n    }\n  }\n\n  /**\n   * Destroy the lenis instance, remove all event listeners and clean up the class name\n   */\n  destroy() {\n    this.emitter.destroy()\n\n    this.options.wrapper.removeEventListener(\n      'scroll',\n      this.onNativeScroll,\n      false\n    )\n\n    this.options.wrapper.removeEventListener('scrollend', this.onScrollEnd, {\n      capture: true,\n    })\n\n    this.options.wrapper.removeEventListener(\n      'pointerdown',\n      this.onPointerDown as EventListener,\n      false\n    )\n\n    if (this.options.anchors && this.options.wrapper === window) {\n      this.options.wrapper.removeEventListener(\n        'click',\n        this.onClick as EventListener,\n        false\n      )\n    }\n\n    this.virtualScroll.destroy()\n    this.dimensions.destroy()\n\n    this.cleanUpClassName()\n\n    if (this.__rafID) {\n      cancelAnimationFrame(this.__rafID)\n    }\n  }\n\n  /**\n   * Add an event listener for the given event and callback\n   *\n   * @param event Event name\n   * @param callback Callback function\n   * @returns Unsubscribe function\n   */\n  on(event: 'scroll', callback: ScrollCallback): () => void\n  on(event: 'virtual-scroll', callback: VirtualScrollCallback): () => void\n  on(event: LenisEvent, callback: any) {\n    return this.emitter.on(event, callback)\n  }\n\n  /**\n   * Remove an event listener for the given event and callback\n   *\n   * @param event Event name\n   * @param callback Callback function\n   */\n  off(event: 'scroll', callback: ScrollCallback): void\n  off(event: 'virtual-scroll', callback: VirtualScrollCallback): void\n  off(event: LenisEvent, callback: any) {\n    return this.emitter.off(event, callback)\n  }\n\n  private onScrollEnd = (e: Event | CustomEvent) => {\n    if (!(e instanceof CustomEvent)) {\n      if (this.isScrolling === 'smooth' || this.isScrolling === false) {\n        e.stopPropagation()\n      }\n    }\n  }\n\n  private dispatchScrollendEvent = () => {\n    this.options.wrapper.dispatchEvent(\n      new CustomEvent('scrollend', {\n        bubbles: this.options.wrapper === window,\n        // cancelable: false,\n        detail: {\n          lenisScrollEnd: true,\n        },\n      })\n    )\n  }\n\n  private onTransitionEnd = (event: TransitionEvent) => {\n    if (event.propertyName.includes('overflow')) {\n      const property = this.isHorizontal ? 'overflow-x' : 'overflow-y'\n\n      const overflow = getComputedStyle(this.rootElement)[\n        property as keyof CSSStyleDeclaration\n      ] as string\n\n      if (['hidden', 'clip'].includes(overflow)) {\n        this.internalStop()\n      } else {\n        this.internalStart()\n      }\n    }\n  }\n\n  private setScroll(scroll: number) {\n    // behavior: 'instant' bypasses the scroll-behavior CSS property\n\n    if (this.isHorizontal) {\n      this.options.wrapper.scrollTo({ left: scroll, behavior: 'instant' })\n    } else {\n      this.options.wrapper.scrollTo({ top: scroll, behavior: 'instant' })\n    }\n  }\n\n  private onClick = (event: PointerEvent | MouseEvent) => {\n    const path = event.composedPath()\n    const anchor = path.find(\n      (node) =>\n        node instanceof HTMLAnchorElement &&\n        (node.getAttribute('href')?.startsWith('#') ||\n          node.getAttribute('href')?.startsWith('/#') ||\n          node.getAttribute('href')?.startsWith('./#'))\n    ) as HTMLAnchorElement | undefined\n    if (anchor) {\n      const id = anchor.getAttribute('href')\n\n      if (id) {\n        const options =\n          typeof this.options.anchors === 'object' && this.options.anchors\n            ? this.options.anchors\n            : undefined\n\n        let target: number | string = `#${id.split('#')[1]}`\n        if (['#', '/#', './#', '#top', '/#top', './#top'].includes(id)) {\n          target = 0\n        }\n\n        this.scrollTo(target, options)\n      }\n    }\n  }\n\n  private onPointerDown = (event: PointerEvent | MouseEvent) => {\n    if (event.button === 1) {\n      this.reset()\n    }\n  }\n\n  private onVirtualScroll = (data: VirtualScrollData) => {\n    if (\n      typeof this.options.virtualScroll === 'function' &&\n      this.options.virtualScroll(data) === false\n    )\n      return\n\n    const { deltaX, deltaY, event } = data\n\n    this.emitter.emit('virtual-scroll', { deltaX, deltaY, event })\n\n    // keep zoom feature\n    if (event.ctrlKey) return\n    // @ts-ignore\n    if (event.lenisStopPropagation) return\n\n    const isTouch = event.type.includes('touch')\n    const isWheel = event.type.includes('wheel')\n\n    this.isTouching = event.type === 'touchstart' || event.type === 'touchmove'\n    // if (event.type === 'touchend') {\n    //   console.log('touchend', this.scroll)\n    //   // this.lastVelocity = this.velocity\n    //   // this.velocity = 0\n    //   // this.isScrolling = false\n    //   this.emit({ type: 'touchend' })\n    //   // alert('touchend')\n    //   return\n    // }\n\n    const isClickOrTap = deltaX === 0 && deltaY === 0\n\n    const isTapToStop =\n      this.options.syncTouch &&\n      isTouch &&\n      event.type === 'touchstart' &&\n      isClickOrTap &&\n      !this.isStopped &&\n      !this.isLocked\n\n    if (isTapToStop) {\n      this.reset()\n      return\n    }\n\n    // const isPullToRefresh =\n    //   this.options.gestureOrientation === 'vertical' &&\n    //   this.scroll === 0 &&\n    //   !this.options.infinite &&\n    //   deltaY <= 5 // touch pull to refresh, not reliable yet\n\n    const isUnknownGesture =\n      (this.options.gestureOrientation === 'vertical' && deltaY === 0) ||\n      (this.options.gestureOrientation === 'horizontal' && deltaX === 0)\n\n    if (isClickOrTap || isUnknownGesture) {\n      // console.log('prevent')\n      return\n    }\n\n    // catch if scrolling on nested scroll elements\n    let composedPath = event.composedPath()\n    composedPath = composedPath.slice(0, composedPath.indexOf(this.rootElement)) // remove parents elements\n\n    const prevent = this.options.prevent\n\n    if (\n      !!composedPath.find(\n        (node) =>\n          node instanceof HTMLElement &&\n          ((typeof prevent === 'function' && prevent?.(node)) ||\n            node.hasAttribute?.('data-lenis-prevent') ||\n            (isTouch && node.hasAttribute?.('data-lenis-prevent-touch')) ||\n            (isWheel && node.hasAttribute?.('data-lenis-prevent-wheel')) ||\n            (this.options.allowNestedScroll &&\n              this.checkNestedScroll(node, { deltaX, deltaY })))\n      )\n    )\n      return\n\n    if (this.isStopped || this.isLocked) {\n      if (event.cancelable) {\n        event.preventDefault() // this will stop forwarding the event to the parent, this is problematic\n      }\n      return\n    }\n\n    const isSmooth =\n      (this.options.syncTouch && isTouch) ||\n      (this.options.smoothWheel && isWheel)\n\n    if (!isSmooth) {\n      this.isScrolling = 'native'\n      this.animate.stop()\n      // @ts-ignore\n      event.lenisStopPropagation = true\n      return\n    }\n\n    let delta = deltaY\n    if (this.options.gestureOrientation === 'both') {\n      delta = Math.abs(deltaY) > Math.abs(deltaX) ? deltaY : deltaX\n    } else if (this.options.gestureOrientation === 'horizontal') {\n      delta = deltaX\n    }\n\n    if (\n      !this.options.overscroll ||\n      this.options.infinite ||\n      (this.options.wrapper !== window &&\n        this.limit > 0 &&\n        ((this.animatedScroll > 0 && this.animatedScroll < this.limit) ||\n          (this.animatedScroll === 0 && deltaY > 0) ||\n          (this.animatedScroll === this.limit && deltaY < 0)))\n    ) {\n      // @ts-ignore\n      event.lenisStopPropagation = true\n      // event.stopPropagation()\n    }\n\n    if (event.cancelable) {\n      event.preventDefault()\n    }\n\n    const isSyncTouch = isTouch && this.options.syncTouch\n    const isTouchEnd = isTouch && event.type === 'touchend'\n\n    const hasTouchInertia = isTouchEnd\n\n    if (hasTouchInertia) {\n      // delta = this.velocity * this.options.touchInertiaMultiplier\n      delta =\n        Math.sign(this.velocity) *\n        Math.pow(Math.abs(this.velocity), this.options.touchInertiaExponent)\n    }\n\n    this.scrollTo(this.targetScroll + delta, {\n      programmatic: false,\n      ...(isSyncTouch\n        ? {\n            lerp: hasTouchInertia ? this.options.syncTouchLerp : 1,\n            // immediate: !hasTouchInertia,\n          }\n        : {\n            lerp: this.options.lerp,\n            duration: this.options.duration,\n            easing: this.options.easing,\n          }),\n    })\n  }\n\n  /**\n   * Force lenis to recalculate the dimensions\n   */\n  resize() {\n    this.dimensions.resize()\n    this.animatedScroll = this.targetScroll = this.actualScroll\n    this.emit()\n  }\n\n  private emit() {\n    this.emitter.emit('scroll', this)\n  }\n\n  private onNativeScroll = () => {\n    if (this._resetVelocityTimeout !== null) {\n      clearTimeout(this._resetVelocityTimeout)\n      this._resetVelocityTimeout = null\n    }\n\n    if (this._preventNextNativeScrollEvent) {\n      this._preventNextNativeScrollEvent = false\n      return\n    }\n\n    if (this.isScrolling === false || this.isScrolling === 'native') {\n      const lastScroll = this.animatedScroll\n      this.animatedScroll = this.targetScroll = this.actualScroll\n      this.lastVelocity = this.velocity\n      this.velocity = this.animatedScroll - lastScroll\n      this.direction = Math.sign(\n        this.animatedScroll - lastScroll\n      ) as Lenis['direction']\n\n      if (!this.isStopped) {\n        this.isScrolling = 'native'\n      }\n\n      this.emit()\n\n      if (this.velocity !== 0) {\n        this._resetVelocityTimeout = setTimeout(() => {\n          this.lastVelocity = this.velocity\n          this.velocity = 0\n          this.isScrolling = false\n          this.emit()\n        }, 400)\n      }\n    }\n  }\n\n  private reset() {\n    this.isLocked = false\n    this.isScrolling = false\n    this.animatedScroll = this.targetScroll = this.actualScroll\n    this.lastVelocity = this.velocity = 0\n    this.animate.stop()\n  }\n\n  /**\n   * Start lenis scroll after it has been stopped\n   */\n  start() {\n    if (!this.isStopped) return\n\n    if (this.options.autoToggle) {\n      this.rootElement.style.removeProperty('overflow')\n      return\n    }\n\n    this.internalStart()\n  }\n\n  private internalStart() {\n    if (!this.isStopped) return\n\n    this.reset()\n    this.isStopped = false\n    this.emit()\n  }\n\n  /**\n   * Stop lenis scroll\n   */\n  stop() {\n    if (this.isStopped) return\n\n    if (this.options.autoToggle) {\n      this.rootElement.style.setProperty('overflow', 'clip')\n      return\n    }\n\n    this.internalStop()\n  }\n\n  private internalStop() {\n    if (this.isStopped) return\n\n    this.reset()\n    this.isStopped = true\n    this.emit()\n  }\n\n  /**\n   * RequestAnimationFrame for lenis\n   *\n   * @param time The time in ms from an external clock like `requestAnimationFrame` or Tempus\n   */\n  raf = (time: number) => {\n    const deltaTime = time - (this.time || time)\n    this.time = time\n\n    this.animate.advance(deltaTime * 0.001)\n\n    if (this.options.autoRaf) {\n      this.__rafID = requestAnimationFrame(this.raf)\n    }\n  }\n\n  /**\n   * Scroll to a target value\n   *\n   * @param target The target value to scroll to\n   * @param options The options for the scroll\n   *\n   * @example\n   * lenis.scrollTo(100, {\n   *   offset: 100,\n   *   duration: 1,\n   *   easing: (t) => 1 - Math.cos((t * Math.PI) / 2),\n   *   lerp: 0.1,\n   *   onStart: () => {\n   *     console.log('onStart')\n   *   },\n   *   onComplete: () => {\n   *     console.log('onComplete')\n   *   },\n   * })\n   */\n  scrollTo(\n    target: number | string | HTMLElement,\n    {\n      offset = 0,\n      immediate = false,\n      lock = false,\n      duration = this.options.duration,\n      easing = this.options.easing,\n      lerp = this.options.lerp,\n      onStart,\n      onComplete,\n      force = false, // scroll even if stopped\n      programmatic = true, // called from outside of the class\n      userData,\n    }: ScrollToOptions = {}\n  ) {\n    if ((this.isStopped || this.isLocked) && !force) return\n\n    // keywords\n    if (\n      typeof target === 'string' &&\n      ['top', 'left', 'start'].includes(target)\n    ) {\n      target = 0\n    } else if (\n      typeof target === 'string' &&\n      ['bottom', 'right', 'end'].includes(target)\n    ) {\n      target = this.limit\n    } else {\n      let node\n\n      if (typeof target === 'string') {\n        // CSS selector\n        node = document.querySelector(target)\n      } else if (target instanceof HTMLElement && target?.nodeType) {\n        // Node element\n        node = target\n      }\n\n      if (node) {\n        if (this.options.wrapper !== window) {\n          // nested scroll offset correction\n          const wrapperRect = this.rootElement.getBoundingClientRect()\n          offset -= this.isHorizontal ? wrapperRect.left : wrapperRect.top\n        }\n\n        const rect = node.getBoundingClientRect()\n\n        target =\n          (this.isHorizontal ? rect.left : rect.top) + this.animatedScroll\n      }\n    }\n\n    if (typeof target !== 'number') return\n\n    target += offset\n    target = Math.round(target)\n\n    if (this.options.infinite) {\n      if (programmatic) {\n        this.targetScroll = this.animatedScroll = this.scroll\n\n        const distance = target - this.animatedScroll\n\n        if (distance > this.limit / 2) {\n          target = target - this.limit\n        } else if (distance < -this.limit / 2) {\n          target = target + this.limit\n        }\n      }\n    } else {\n      target = clamp(0, target, this.limit)\n    }\n\n    if (target === this.targetScroll) {\n      onStart?.(this)\n      onComplete?.(this)\n      return\n    }\n\n    this.userData = userData ?? {}\n\n    if (immediate) {\n      this.animatedScroll = this.targetScroll = target\n      this.setScroll(this.scroll)\n      this.reset()\n      this.preventNextNativeScrollEvent()\n      this.emit()\n      onComplete?.(this)\n      this.userData = {}\n\n      requestAnimationFrame(() => {\n        this.dispatchScrollendEvent()\n      })\n      return\n    }\n\n    if (!programmatic) {\n      this.targetScroll = target\n    }\n\n    // flip to easing/time based animation if at least one of them is provided\n    if (typeof duration === 'number' && typeof easing !== 'function') {\n      easing = defaultEasing\n    } else if (typeof easing === 'function' && typeof duration !== 'number') {\n      duration = 1\n    }\n\n    this.animate.fromTo(this.animatedScroll, target, {\n      duration,\n      easing,\n      lerp,\n      onStart: () => {\n        // started\n        if (lock) this.isLocked = true\n        this.isScrolling = 'smooth'\n        onStart?.(this)\n      },\n      onUpdate: (value: number, completed: boolean) => {\n        this.isScrolling = 'smooth'\n\n        // updated\n        this.lastVelocity = this.velocity\n        this.velocity = value - this.animatedScroll\n        this.direction = Math.sign(this.velocity) as Lenis['direction']\n\n        this.animatedScroll = value\n        this.setScroll(this.scroll)\n\n        if (programmatic) {\n          // wheel during programmatic should stop it\n          this.targetScroll = value\n        }\n\n        if (!completed) this.emit()\n\n        if (completed) {\n          this.reset()\n          this.emit()\n          onComplete?.(this)\n          this.userData = {}\n\n          requestAnimationFrame(() => {\n            this.dispatchScrollendEvent()\n          })\n\n          // avoid emitting event twice\n          this.preventNextNativeScrollEvent()\n        }\n      },\n    })\n  }\n\n  private preventNextNativeScrollEvent() {\n    this._preventNextNativeScrollEvent = true\n\n    requestAnimationFrame(() => {\n      this._preventNextNativeScrollEvent = false\n    })\n  }\n\n  private checkNestedScroll(\n    node: HTMLElement,\n    { deltaX, deltaY }: { deltaX: number; deltaY: number }\n  ) {\n    const time = Date.now()\n\n    // @ts-ignore\n    const cache = (node._lenis ??= {})\n\n    let hasOverflowX,\n      hasOverflowY,\n      isScrollableX,\n      isScrollableY,\n      scrollWidth,\n      scrollHeight,\n      clientWidth,\n      clientHeight\n\n    const gestureOrientation = this.options.gestureOrientation\n\n    if (time - (cache.time ?? 0) > 2000) {\n      cache.time = Date.now()\n\n      const computedStyle = window.getComputedStyle(node)\n      cache.computedStyle = computedStyle\n\n      const overflowXString = computedStyle.overflowX\n      const overflowYString = computedStyle.overflowY\n\n      hasOverflowX = ['auto', 'overlay', 'scroll'].includes(overflowXString)\n      hasOverflowY = ['auto', 'overlay', 'scroll'].includes(overflowYString)\n      cache.hasOverflowX = hasOverflowX\n      cache.hasOverflowY = hasOverflowY\n\n      if (!hasOverflowX && !hasOverflowY) return false // if no overflow, it's not scrollable no matter what, early return saves some computations\n      if (gestureOrientation === 'vertical' && !hasOverflowY) return false\n      if (gestureOrientation === 'horizontal' && !hasOverflowX) return false\n\n      scrollWidth = node.scrollWidth\n      scrollHeight = node.scrollHeight\n\n      clientWidth = node.clientWidth\n      clientHeight = node.clientHeight\n\n      isScrollableX = scrollWidth > clientWidth\n      isScrollableY = scrollHeight > clientHeight\n\n      cache.isScrollableX = isScrollableX\n      cache.isScrollableY = isScrollableY\n      cache.scrollWidth = scrollWidth\n      cache.scrollHeight = scrollHeight\n      cache.clientWidth = clientWidth\n      cache.clientHeight = clientHeight\n    } else {\n      isScrollableX = cache.isScrollableX\n      isScrollableY = cache.isScrollableY\n      hasOverflowX = cache.hasOverflowX\n      hasOverflowY = cache.hasOverflowY\n      scrollWidth = cache.scrollWidth\n      scrollHeight = cache.scrollHeight\n      clientWidth = cache.clientWidth\n      clientHeight = cache.clientHeight\n    }\n\n    if (\n      (!hasOverflowX && !hasOverflowY) ||\n      (!isScrollableX && !isScrollableY)\n    ) {\n      return false\n    }\n\n    if (gestureOrientation === 'vertical' && (!hasOverflowY || !isScrollableY))\n      return false\n\n    if (\n      gestureOrientation === 'horizontal' &&\n      (!hasOverflowX || !isScrollableX)\n    )\n      return false\n\n    let orientation: 'x' | 'y' | undefined\n\n    if (gestureOrientation === 'horizontal') {\n      orientation = 'x'\n    } else if (gestureOrientation === 'vertical') {\n      orientation = 'y'\n    } else {\n      const isScrollingX = deltaX !== 0\n      const isScrollingY = deltaY !== 0\n\n      if (isScrollingX && hasOverflowX && isScrollableX) {\n        orientation = 'x'\n      }\n\n      if (isScrollingY && hasOverflowY && isScrollableY) {\n        orientation = 'y'\n      }\n    }\n\n    if (!orientation) return false\n\n    let scroll, maxScroll, delta, hasOverflow, isScrollable\n\n    if (orientation === 'x') {\n      scroll = node.scrollLeft\n      maxScroll = scrollWidth - clientWidth\n      delta = deltaX\n\n      hasOverflow = hasOverflowX\n      isScrollable = isScrollableX\n    } else if (orientation === 'y') {\n      scroll = node.scrollTop\n      maxScroll = scrollHeight - clientHeight\n      delta = deltaY\n\n      hasOverflow = hasOverflowY\n      isScrollable = isScrollableY\n    } else {\n      return false\n    }\n\n    const willScroll = delta > 0 ? scroll < maxScroll : scroll > 0\n\n    return willScroll && hasOverflow && isScrollable\n  }\n\n  /**\n   * The root element on which lenis is instanced\n   */\n  get rootElement() {\n    return (\n      this.options.wrapper === window\n        ? document.documentElement\n        : this.options.wrapper\n    ) as HTMLElement\n  }\n\n  /**\n   * The limit which is the maximum scroll value\n   */\n  get limit() {\n    if (this.options.__experimental__naiveDimensions) {\n      if (this.isHorizontal) {\n        return this.rootElement.scrollWidth - this.rootElement.clientWidth\n      } else {\n        return this.rootElement.scrollHeight - this.rootElement.clientHeight\n      }\n    } else {\n      return this.dimensions.limit[this.isHorizontal ? 'x' : 'y']\n    }\n  }\n\n  /**\n   * Whether or not the scroll is horizontal\n   */\n  get isHorizontal() {\n    return this.options.orientation === 'horizontal'\n  }\n\n  /**\n   * The actual scroll value\n   */\n  get actualScroll() {\n    // value browser takes into account\n    // it has to be this way because of DOCTYPE declaration\n    const wrapper = this.options.wrapper as Window | HTMLElement\n\n    return this.isHorizontal\n      ? (wrapper as Window).scrollX ?? (wrapper as HTMLElement).scrollLeft\n      : (wrapper as Window).scrollY ?? (wrapper as HTMLElement).scrollTop\n  }\n\n  /**\n   * The current scroll value\n   */\n  get scroll() {\n    return this.options.infinite\n      ? modulo(this.animatedScroll, this.limit)\n      : this.animatedScroll\n  }\n\n  /**\n   * The progress of the scroll relative to the limit\n   */\n  get progress() {\n    // avoid progress to be NaN\n    return this.limit === 0 ? 1 : this.scroll / this.limit\n  }\n\n  /**\n   * Current scroll state\n   */\n  get isScrolling() {\n    return this._isScrolling\n  }\n\n  private set isScrolling(value: Scrolling) {\n    if (this._isScrolling !== value) {\n      this._isScrolling = value\n      this.updateClassName()\n    }\n  }\n\n  /**\n   * Check if lenis is stopped\n   */\n  get isStopped() {\n    return this._isStopped\n  }\n\n  private set isStopped(value: boolean) {\n    if (this._isStopped !== value) {\n      this._isStopped = value\n      this.updateClassName()\n    }\n  }\n\n  /**\n   * Check if lenis is locked\n   */\n  get isLocked() {\n    return this._isLocked\n  }\n\n  private set isLocked(value: boolean) {\n    if (this._isLocked !== value) {\n      this._isLocked = value\n      this.updateClassName()\n    }\n  }\n\n  /**\n   * Check if lenis is smooth scrolling\n   */\n  get isSmooth() {\n    return this.isScrolling === 'smooth'\n  }\n\n  /**\n   * The class name applied to the wrapper element\n   */\n  get className() {\n    let className = 'lenis'\n    if (this.options.autoToggle) className += ' lenis-autoToggle'\n    if (this.isStopped) className += ' lenis-stopped'\n    if (this.isLocked) className += ' lenis-locked'\n    if (this.isScrolling) className += ' lenis-scrolling'\n    if (this.isScrolling === 'smooth') className += ' lenis-smooth'\n    return className\n  }\n\n  private updateClassName() {\n    this.cleanUpClassName()\n\n    this.rootElement.className =\n      `${this.rootElement.className} ${this.className}`.trim()\n  }\n\n  private cleanUpClassName() {\n    this.rootElement.className = this.rootElement.className\n      .replace(/lenis(-\\w+)?/g, '')\n      .trim()\n  }\n}\n", "import { useEffect, useLayoutEffect as vanillaUseLayoutEffect } from 'react'\n\nexport const isBrowser = typeof window !== 'undefined'\n\nexport const useLayoutEffect = isBrowser ? vanillaUseLayoutEffect : useEffect\n", "// Global config\n\n// avoid Three types to ease tree shaking\ntype PreloadCallback = (gl: any, scene: any, camera: any) => void\n\nexport const config = {\n  // Execution order for useFrames (highest = last render)\n  PRIORITY_PRELOAD: 0,\n  PRIORITY_SCISSORS: 1,\n  PRIORITY_VIEWPORTS: 1,\n  PRIORITY_GLOBAL: 1000,\n\n  DEFAULT_SCALE_MULTIPLIER: 1,\n\n  // Global rendering props\n  preloadQueue: [] as PreloadCallback[],\n}\n", "import create from 'zustand'\nimport { config } from './config'\nimport type Lenis from 'lenis'\n\nimport { ScrollCallback, ScrollData } from './scrollbar/SmoothScrollbarTypes'\n\ninterface ScrollRigStore {\n  debug: boolean\n  scaleMultiplier: number\n  globalRender: boolean\n  globalPriority: number\n  globalClearDepth: boolean\n  globalRenderQueue: false | any[]\n  clearGlobalRenderQueue: () => void\n  isCanvasAvailable: boolean\n  hasSmoothScrollbar: boolean\n  canvasChildren: Record<string, any | undefined>\n  updateCanvas: (key: string, newProps: any) => void\n  renderToCanvas: (key: string, mesh: any, props: any) => void\n  removeFromCanvas: (key: string, dispose: boolean) => void\n  pageReflow: number\n  requestReflow: () => void\n  scroll: ScrollData\n  __lenis: Lenis | undefined\n  scrollTo: (target: any) => void\n  onScroll: (cb: ScrollCallback) => () => void\n}\n\nconst useCanvasStore = create<ScrollRigStore>((set) => ({\n  // //////////////////////////////////////////////////////////////////////////\n  // GLOBAL ScrollRig STATE\n  // //////////////////////////////////////////////////////////////////////////\n  debug: false,\n  scaleMultiplier: config.DEFAULT_SCALE_MULTIPLIER,\n\n  globalRender: true,\n  globalPriority: config.PRIORITY_GLOBAL,\n  globalClearDepth: false,\n\n  globalRenderQueue: false,\n  clearGlobalRenderQueue: () => set(() => ({ globalRenderQueue: false })),\n\n  // true if WebGL initialized without errors\n  isCanvasAvailable: false,\n\n  // true if <VirtualScrollbar> is currently enabled\n  hasSmoothScrollbar: false,\n\n  // map of all components to render on the global canvas\n  canvasChildren: {},\n\n  // add component to canvas\n  renderToCanvas: (key, mesh, props = {}) =>\n    set(({ canvasChildren }) => {\n      // check if already mounted\n      if (Object.getOwnPropertyDescriptor(canvasChildren, key)) {\n        // increase usage count\n        canvasChildren[key].instances += 1\n        canvasChildren[key].props.inactive = false\n        return { canvasChildren }\n      } else {\n        // otherwise mount it\n        const obj = { ...canvasChildren, [key]: { mesh, props, instances: 1 } }\n        return { canvasChildren: obj }\n      }\n    }),\n\n  // pass new props to a canvas component\n  updateCanvas: (key, newProps) =>\n    // @ts-ignore\n    set(({ canvasChildren }) => {\n      if (!canvasChildren[key]) return\n      const {\n        [key]: { mesh, props, instances },\n      } = canvasChildren\n      const obj = {\n        ...canvasChildren,\n        [key]: { mesh, props: { ...props, ...newProps }, instances },\n      }\n      // console.log('updateCanvas', key, { ...props, ...newProps })\n      return { canvasChildren: obj }\n    }),\n\n  // remove component from canvas\n  removeFromCanvas: (key, dispose = true) =>\n    set(({ canvasChildren }) => {\n      // check if remove or reduce instances\n      if (canvasChildren[key]?.instances > 1) {\n        // reduce usage count\n        canvasChildren[key].instances -= 1\n        return { canvasChildren }\n      } else {\n        if (dispose) {\n          // unmount since no longer used\n          const { [key]: _omit, ...obj } = canvasChildren // make a separate copy of the obj and omit\n          return { canvasChildren: obj }\n        } else {\n          // or tell it that it is \"inactive\"\n          canvasChildren[key].instances = 0\n          canvasChildren[key].props.inactive = true\n          return { canvasChildren: { ...canvasChildren } }\n        }\n      }\n    }),\n\n  // Used to ask components to re-calculate their positions after a layout reflow\n  pageReflow: 0,\n  requestReflow: () => {\n    set((state) => {\n      return { pageReflow: state.pageReflow + 1 }\n    })\n  },\n\n  // keep track of scrollbar\n  scroll: {\n    y: 0,\n    x: 0,\n    limit: 0,\n    velocity: 0,\n    progress: 0,\n    direction: 0,\n    scrollDirection: undefined,\n  },\n  __lenis: undefined,\n  scrollTo: () => {},\n  onScroll: () => () => {},\n}))\n\nexport { useCanvasStore }\n", "import { useEffect } from 'react'\nimport { ResizeObserver as Polyfill } from '@juggle/resize-observer'\n\nimport { useCanvasStore } from '../store'\n\n/**\n * Trigger reflow when WebFonts loaded\n */\nexport const ResizeManager = () => {\n  const requestReflow = useCanvasStore((state) => state.requestReflow)\n  const debug = useCanvasStore((state) => state.debug)\n\n  // reflow on webfont loaded to prevent misalignments\n  useEffect(() => {\n    const ResizeObserver = window.ResizeObserver || Polyfill\n\n    // watch out for any random height change\n    let observer = new ResizeObserver(() => {\n      requestReflow()\n      debug && console.log('ResizeManager', 'document.body height changed')\n    })\n    observer.observe(document.body)\n    return () => {\n      observer?.disconnect()\n    }\n  }, [])\n\n  return null\n}\n", "import React, { useRef, forwardRef, useMemo, useImperativeHandle } from 'react'\nimport { useThree } from '@react-three/fiber'\nimport { PerspectiveCamera as PerspectiveCameraImpl } from 'three'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\ntype Props = JSX.IntrinsicElements['perspectiveCamera'] & {\n  makeDefault?: boolean\n  margin?: number\n}\n\nconst DEFAULT_FOV = 50\n\nexport const PerspectiveCamera = forwardRef(({ makeDefault = false, margin = 0, ...props }: Props, ref) => {\n  const set = useThree((state) => state.set)\n  const camera = useThree((state) => state.camera)\n  const size = useThree((state) => state.size)\n  const viewport = useThree((state) => state.viewport)\n  const cameraRef = useRef<PerspectiveCameraImpl>(null!)\n  useImperativeHandle(ref, () => cameraRef.current)\n\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  // Calculate FoV or distance to match DOM size\n  const { fov, distance, aspect } = useMemo(() => {\n    const width = (size.width + margin * 2) * scaleMultiplier\n    const height = (size.height + margin * 2) * scaleMultiplier\n    const aspect = width / height\n\n    // check props vs defaults\n    let fov = props.fov || DEFAULT_FOV\n    let distance = (props?.position as number[])?.[2]\n\n    // calculate either FoV or distance to match scale\n    if (distance) {\n      // calculate FoV based on distance\n      fov = 2 * (180 / Math.PI) * Math.atan(height / (2 * distance))\n    } else {\n      // calculate distance for specified FoV\n      const ratio = Math.tan(((fov / 2.0) * Math.PI) / 180.0) * 2.0\n      distance = height / ratio\n    }\n\n    return { fov, distance, aspect }\n  }, [size, scaleMultiplier, pageReflow])\n\n  // Update camera projection and R3F viewport\n  useLayoutEffect(() => {\n    cameraRef.current.lookAt(0, 0, 0)\n    cameraRef.current.updateProjectionMatrix()\n    // https://github.com/react-spring/@react-three/fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n    cameraRef.current.updateMatrixWorld()\n    // update r3f viewport which is lagging on resize\n    set((state) => ({ viewport: { ...state.viewport, ...viewport.getCurrentViewport(camera) } }))\n  }, [size, scaleMultiplier, pageReflow])\n\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera\n      set(() => ({ camera: cameraRef.current! }))\n      return () => set(() => ({ camera: oldCam }))\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set])\n\n  return (\n    <perspectiveCamera\n      ref={cameraRef}\n      position={[0, 0, distance]}\n      onUpdate={(self) => self.updateProjectionMatrix()}\n      near={0.1}\n      aspect={aspect}\n      fov={fov}\n      far={distance * 2}\n      {...props}\n    />\n  )\n})\n", "import React, { useRef, forwardRef, useMemo, useImperativeHandle } from 'react'\nimport { OrthographicCamera as OrthographicCameraImpl } from 'three'\nimport { useThree } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\ntype Props = JSX.IntrinsicElements['orthographicCamera'] & {\n  makeDefault?: boolean\n  margin?: number\n}\nexport const OrthographicCamera = forwardRef(({ makeDefault = false, margin = 0, ...props }: Props, ref) => {\n  const set = useThree((state) => state.set)\n  const camera = useThree((state) => state.camera)\n  const size = useThree((state) => state.size)\n\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  const distance = useMemo(() => {\n    const width = size.width * scaleMultiplier\n    const height = size.height * scaleMultiplier\n    return Math.max(width, height)\n  }, [size, pageReflow, scaleMultiplier])\n\n  const cameraRef = useRef<OrthographicCameraImpl>(null!)\n  useImperativeHandle(ref, () => cameraRef.current)\n  useLayoutEffect(() => {\n    cameraRef.current.lookAt(0, 0, 0)\n    cameraRef.current.updateProjectionMatrix()\n    // https://github.com/react-spring/@react-three/fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n    cameraRef.current.updateMatrixWorld()\n  }, [distance, size])\n\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera\n      set(() => ({ camera: cameraRef.current! }))\n      return () => set(() => ({ camera: oldCam }))\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set])\n\n  return (\n    <orthographicCamera\n      left={(size.width * scaleMultiplier) / -2 - margin * scaleMultiplier}\n      right={(size.width * scaleMultiplier) / 2 + margin * scaleMultiplier}\n      top={(size.height * scaleMultiplier) / 2 + margin * scaleMultiplier}\n      bottom={(size.height * scaleMultiplier) / -2 - margin * scaleMultiplier}\n      far={distance * 2}\n      position={[0, 0, distance]}\n      near={0.001}\n      ref={cameraRef}\n      onUpdate={(self) => self.updateProjectionMatrix()}\n      {...props}\n    />\n  )\n})\n", "import { Object3D } from 'three'\n\ntype CulledObject = {\n  wasFrustumCulled?: boolean\n  wasVisible?: boolean\n} & Object3D\n\n// Use to override Frustum temporarily to pre-upload textures to GPU\nexport function setAllCulled(obj: CulledObject, overrideCulled: boolean) {\n  if (!obj) return\n  if (overrideCulled === false) {\n    obj.wasFrustumCulled = obj.frustumCulled\n    obj.wasVisible = obj.visible\n    obj.visible = true\n    obj.frustumCulled = false\n  } else {\n    obj.visible = !!obj.wasVisible\n    obj.frustumCulled = !!obj.wasFrustumCulled\n  }\n  obj.children.forEach((child) => setAllCulled(child, overrideCulled))\n}\n", "import { config } from './config'\nimport { Vector2, WebGLRenderer, Scene, Camera } from 'three'\nimport { invalidate } from '@react-three/fiber'\n\nimport { setAllCulled } from './utils/helpers'\nimport { useCanvasStore } from './store'\n\nconst viewportSize = new Vector2()\n\n// Flag that we need global rendering (full screen)\nexport const requestRender = (layers = [0]) => {\n  useCanvasStore.getState().globalRenderQueue = useCanvasStore.getState().globalRenderQueue || [0]\n  useCanvasStore.getState().globalRenderQueue = [...(useCanvasStore.getState().globalRenderQueue || []), ...layers]\n}\n\nexport const renderScissor = ({\n  gl,\n  scene,\n  camera,\n  left,\n  top,\n  width,\n  height,\n  layer = 0,\n  autoClear = false,\n  clearDepth = false,\n}: any) => {\n  if (!scene || !camera) return\n  gl.autoClear = autoClear\n  gl.setScissor(left, top, width, height)\n  gl.setScissorTest(true)\n  camera.layers.set(layer)\n  clearDepth && gl.clearDepth()\n  gl.render(scene, camera)\n  gl.setScissorTest(false)\n}\n\nexport const renderViewport = ({\n  gl,\n  scene,\n  camera,\n  left,\n  top,\n  width,\n  height,\n  layer = 0,\n  scissor = true,\n  autoClear = false,\n  clearDepth = false,\n}: any) => {\n  if (!scene || !camera) return\n  gl.getSize(viewportSize)\n  gl.autoClear = autoClear\n  gl.setViewport(left, top, width, height)\n  gl.setScissor(left, top, width, height)\n  gl.setScissorTest(scissor)\n  camera.layers.set(layer)\n  clearDepth && gl.clearDepth()\n  gl.render(scene, camera)\n  gl.setScissorTest(false)\n  gl.setViewport(0, 0, viewportSize.x, viewportSize.y)\n}\n\nexport const preloadScene = (\n  { scene, camera, layer = 0 }: { scene?: Scene; camera?: Camera; layer?: number },\n  callback?: () => void\n) => {\n  config.preloadQueue.push((gl: WebGLRenderer, globalScene: Scene, globalCamera: Camera) => {\n    gl.setScissorTest(false)\n    setAllCulled(scene || globalScene, false)\n    ;(camera || globalCamera).layers.set(layer)\n    gl.render(scene || globalScene, camera || globalCamera)\n    setAllCulled(scene || globalScene, true)\n    callback && callback()\n  })\n  // auto trigger a new frame for the preload\n  invalidate()\n}\n", "import { useEffect } from 'react'\n\nimport { useCanvasStore } from '../store'\nimport { preloadScene, requestRender, renderScissor, renderViewport } from '../renderer-api'\n\nexport interface ScrollRigState {\n  debug: boolean\n  isCanvasAvailable: boolean\n  hasSmoothScrollbar: boolean\n  scaleMultiplier: number\n  preloadScene: typeof preloadScene\n  requestRender: typeof requestRender\n  renderScissor: typeof renderScissor\n  renderViewport: typeof renderViewport\n  reflow: () => void\n}\n\n/**\n * Public interface for ScrollRig\n */\nexport const useScrollRig = () => {\n  const isCanvasAvailable = useCanvasStore((state) => state.isCanvasAvailable)\n  const hasSmoothScrollbar = useCanvasStore((state) => state.hasSmoothScrollbar)\n  const requestReflow = useCanvasStore((state) => state.requestReflow)\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const debug = useCanvasStore((state) => state.debug)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  useEffect(() => {\n    if (debug) {\n      // @ts-ignore\n      window._scrollRig = window._scrollRig || {}\n      // @ts-ignore\n      window._scrollRig.reflow = requestReflow\n    }\n  }, [])\n\n  return {\n    // boolean state\n    debug,\n    isCanvasAvailable,\n    hasSmoothScrollbar,\n    // scale\n    scaleMultiplier,\n    // render API\n    preloadScene,\n    requestRender,\n    renderScissor,\n    renderViewport,\n    // recalc all tracker positions\n    reflow: requestReflow,\n    reflowCompleted: pageReflow,\n  } as ScrollRigState\n}\n", "import React, { Fragment, useEffect, ReactNode, cloneElement } from 'react'\nimport { invalidate, useThree } from '@react-three/fiber'\n\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\n\n/**\n * Renders global children from useCanvas hook\n */\nexport const GlobalChildren = ({ children }: { children?: ReactNode }) => {\n  const gl = useThree((s) => s.gl)\n  const canvasChildren = useCanvasStore((state) => state.canvasChildren)\n  const scrollRig = useScrollRig()\n\n  useEffect(() => {\n    // render empty canvas automatically if all children were removed\n    if (!Object.keys(canvasChildren).length) {\n      scrollRig.debug && console.log('GlobalRenderer', 'auto render empty canvas')\n      // clear leftover viewports etc from unmounted components\n      gl.clear()\n      // re-render global scene in case frameloop=\"demand\" to avoid empty canvas\n      scrollRig.requestRender()\n      invalidate()\n    }\n  }, [canvasChildren])\n\n  scrollRig.debug && console.log('GlobalChildren', Object.keys(canvasChildren).length)\n  return (\n    <>\n      {children}\n      {Object.keys(canvasChildren).map((key) => {\n        const { mesh, props } = canvasChildren[key]\n\n        if (typeof mesh === 'function') {\n          return <Fragment key={key}>{mesh({ key, ...scrollRig, ...props })}</Fragment>\n        }\n\n        return cloneElement(mesh, {\n          key,\n          ...props,\n        })\n      })}\n    </>\n  )\n}\n", "import { useThree, useFrame, invalidate } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\n\n/**\n * Global render loop to avoid double renders on the same frame\n */\nexport const GlobalRenderer = () => {\n  const gl = useThree((s) => s.gl)\n  const frameloop = useThree((s) => s.frameloop)\n  const globalClearDepth = useCanvasStore((state) => state.globalClearDepth)\n  const globalPriority = useCanvasStore((state) => state.globalPriority)\n  const scrollRig = useScrollRig()\n\n  // https://threejs.org/docs/#api/en/renderers/WebGLRenderer.debug\n  useLayoutEffect(() => {\n    gl.debug.checkShaderErrors = scrollRig.debug\n  }, [scrollRig.debug])\n\n  // PRELOAD RENDER LOOP\n  useFrame(({ camera, scene }) => {\n    if (!config.preloadQueue.length) return\n    // Render preload frames first and clear directly\n    config.preloadQueue.forEach((render) => render(gl, scene, camera))\n    // cleanup\n    gl.clear()\n    config.preloadQueue = []\n    // trigger new frame to get correct visual state after all preloads\n    scrollRig.debug && console.log('GlobalRenderer', 'preload complete. trigger global render')\n    scrollRig.requestRender()\n    invalidate()\n  }, config.PRIORITY_PRELOAD)\n\n  // GLOBAL RENDER LOOP\n  useFrame(({ camera, scene }) => {\n    const globalRenderQueue = useCanvasStore.getState().globalRenderQueue\n\n    // Render if requested or if always on\n    if (frameloop === 'always' || globalRenderQueue) {\n      // render default layer, scene, camera\n      camera.layers.disableAll()\n      if (globalRenderQueue) {\n        // @ts-ignore\n        globalRenderQueue.forEach((layer) => {\n          camera.layers.enable(layer)\n        })\n      } else {\n        camera.layers.enable(0)\n      }\n\n      // render as HUD over any other renders by default\n      globalClearDepth && gl.clearDepth()\n      gl.render(scene, camera)\n    }\n    // cleanup for next frame\n    useCanvasStore.getState().clearGlobalRenderQueue()\n  }, globalPriority) // Take over rendering\n\n  return null\n}\n", "// @ts-nocheck\nimport { Component, ReactNode } from 'react'\n\ninterface ICanvasErrorBoundary {\n  children: ReactNode\n  onError: () => void\n}\n\nexport class CanvasErrorBoundary extends Component<{}, ICanvasErrorBoundary> {\n  constructor(props) {\n    super(props)\n    this.state = { error: false }\n    this.props = props\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { error }\n  }\n\n  // componentDidCatch(error, errorInfo) {\n  //   // You can also log the error to an error reporting service\n  //   // logErrorToMyService(error, errorInfo)\n  // }\n\n  render() {\n    if (this.state.error) {\n      this.props.onError && this.props.onError(this.state.error)\n      return null\n    }\n\n    return this.props.children\n  }\n}\n", "import React, { ReactNode, startTransition } from 'react'\nimport { Canvas, Props } from '@react-three/fiber'\nimport { ResizeObserver as Polyfill } from '@juggle/resize-observer'\nimport { parse } from 'query-string'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\nimport { ResizeManager } from './ResizeManager'\nimport { PerspectiveCamera } from './PerspectiveCamera'\nimport { OrthographicCamera } from './OrthographicCamera'\n\nimport { GlobalChildren } from './GlobalChildren'\nimport { GlobalRenderer } from './GlobalRenderer'\nimport { CanvasErrorBoundary } from './CanvasErrorBoundary'\n\nimport { config } from '../config'\nimport { version } from '../../package.json'\n\nlet polyfill: new (callback: ResizeObserverCallback) => ResizeObserver\nif (typeof window !== 'undefined') {\n  polyfill = window.ResizeObserver || Polyfill\n}\n\ninterface IGlobalCanvas extends Omit<Props, 'children'> {\n  children?: ReactNode | ((globalChildren: ReactNode) => ReactNode)\n  as?: any\n  orthographic?: boolean\n  onError?: (props: any) => void\n  camera?: any\n  // state\n  debug?: boolean\n  scaleMultiplier?: number\n  globalRender?: boolean\n  globalPriority?: number\n  globalClearDepth?: boolean\n}\n\nconst GlobalCanvasImpl = ({\n  children,\n  as = Canvas,\n  gl,\n  style,\n  orthographic,\n  camera,\n  debug,\n  scaleMultiplier = config.DEFAULT_SCALE_MULTIPLIER,\n  globalRender = true,\n  globalPriority = config.PRIORITY_GLOBAL,\n  globalClearDepth = false,\n  ...props\n}: Omit<IGlobalCanvas, 'onError'>) => {\n  const useGlobalRenderer = useCanvasStore((state) => state.globalRender)\n\n  // enable debug mode\n  useLayoutEffect(() => {\n    if (typeof window !== 'undefined') {\n      // @ts-ignore\n      window.__r3f_scroll_rig = version\n    }\n\n    // Querystring overridess\n    const qs = parse(window.location.search)\n\n    // show debug statements\n    if (debug || typeof qs.debug !== 'undefined') {\n      useCanvasStore.setState({ debug: true })\n      console.info('@14islands/r3f-scroll-rig@' + version)\n    }\n  }, [debug])\n\n  // update state\n  useLayoutEffect(() => {\n    // update as transition so we don't interrupt active suspenses\n    startTransition(() => {\n      useCanvasStore.setState({\n        scaleMultiplier,\n        globalRender,\n        globalPriority,\n        globalClearDepth,\n      })\n    })\n  }, [scaleMultiplier, globalPriority, globalRender, globalClearDepth])\n\n  const As = as\n\n  return (\n    <As\n      id=\"ScrollRig-canvas\"\n      // use our own default camera\n      camera={{\n        manual: true,\n      }}\n      // Some sane defaults\n      gl={{\n        // https://blog.tojicode.com/2013/12/failifmajorperformancecaveat-with-great.html\n        failIfMajorPerformanceCaveat: true, // skip webgl if slow device\n        ...gl,\n      }}\n      // polyfill old iOS safari\n      resize={{ scroll: false, debounce: 0, polyfill }}\n      // default styles\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        height: '100vh', // use 100vh to avoid resize on iOS when url bar goes away\n        ...style,\n      }}\n      // allow to override anything of the above\n      {...props}\n    >\n      {/* @ts-ignore */}\n      {!orthographic && <PerspectiveCamera manual makeDefault {...camera} />}\n      {/* @ts-ignore */}\n      {orthographic && <OrthographicCamera manual makeDefault {...camera} />}\n\n      {useGlobalRenderer && <GlobalRenderer />}\n\n      {typeof children === 'function' ? children(<GlobalChildren />) : <GlobalChildren>{children}</GlobalChildren>}\n\n      <ResizeManager />\n    </As>\n  )\n}\n\nexport const GlobalCanvas = ({ children, onError, ...props }: IGlobalCanvas) => {\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('js-has-global-canvas')\n    useCanvasStore.setState({ isCanvasAvailable: true })\n  }, [])\n\n  return (\n    // @ts-ignore\n    <CanvasErrorBoundary\n      onError={(err: any) => {\n        onError && onError(err)\n        useCanvasStore.setState({ isCanvasAvailable: false }) /* WebGL failed to init */\n        document.documentElement.classList.remove('js-has-global-canvas')\n        document.documentElement.classList.add('js-global-canvas-error')\n      }}\n    >\n      <GlobalCanvasImpl {...props}>{children}</GlobalCanvasImpl>\n      <noscript>\n        <style>\n          {`\n          .ScrollRig-visibilityHidden,\n          .ScrollRig-transparentColor {\n            visibility: unset;\n            color: unset;\n          }\n          `}\n        </style>\n      </noscript>\n    </CanvasErrorBoundary>\n  )\n}\n", "import React from 'react'\nimport { Color } from 'three'\n\nexport const DebugMesh = ({ scale }: { scale: [x: number, y: number, z: number] }) => (\n  <mesh scale={scale}>\n    <planeGeometry />\n    <shaderMaterial\n      args={[\n        {\n          uniforms: {\n            color: { value: new Color('hotpink') },\n          },\n          vertexShader: `\n            void main() {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          `,\n          fragmentShader: `\n            uniform vec3 color;\n            uniform float opacity;\n            void main() {\n              gl_FragColor.rgba = vec4(color, .5);\n            }\n          `,\n        },\n      ]}\n      transparent\n    />\n  </mesh>\n)\n", "import { useState, useEffect } from 'react'\nimport { ResizeObserver as Polyfill } from '@juggle/resize-observer'\nimport pkg from 'debounce'\n\nconst isBrowser = typeof window !== 'undefined'\nexport interface WindowSize {\n  width: number\n  height: number\n}\n\ntype ConfigProps = {\n  debounce?: number\n}\n\n/*\n * Triggers a resize only if the Canvas DOM element changed dimensions - not on window resize event\n *\n * This is to avoid costly re-renders when the URL bar is scrolled away on mobile\n *\n * Based on: https://usehooks.com/useWindowSize/\n */\n\nexport function useWindowSize({ debounce = 0 }: ConfigProps = {}) {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState<WindowSize>({\n    width: isBrowser ? window.innerWidth : Infinity,\n    height: isBrowser ? window.innerHeight : Infinity,\n  })\n\n  useEffect(() => {\n    // check if we can find a canvas - if so, base size on canvas instead of window\n    // since 100vh !== window.innerHeight on mobile\n    const canvasEl = document.getElementById('ScrollRig-canvas')\n\n    // Handler to call on window resize\n    function handleResize() {\n      const width = canvasEl ? canvasEl.clientWidth : window.innerWidth\n      const height = canvasEl ? canvasEl.clientHeight : window.innerHeight\n\n      if (width !== windowSize.width || height !== windowSize.height) {\n        // Set window width/height to state\n        setWindowSize({\n          width,\n          height,\n        })\n      }\n    }\n\n    const debouncedResize = pkg.debounce(handleResize, debounce)\n\n    // Add event listener\n    const ResizeObserver = window.ResizeObserver || Polyfill\n    let observer: ResizeObserver\n    if (canvasEl) {\n      observer = new ResizeObserver(debouncedResize)\n      observer.observe(canvasEl)\n    } else {\n      window.addEventListener('resize', debouncedResize)\n    }\n    // Call handler right away so state gets updated with initial window size\n    handleResize()\n    // Remove event listener on cleanup\n    return () => {\n      window.removeEventListener('resize', debouncedResize)\n      observer?.disconnect()\n    }\n  }, [windowSize, setWindowSize])\n\n  return windowSize\n}\n", "// Linear mapping from range <a1, a2> to range <b1, b2>\nexport function mapLinear(x: number, a1: number, a2: number, b1: number, b2: number) {\n  return b1 + ((x - a1) * (b2 - b1)) / (a2 - a1)\n}\n", "import { useCanvasStore } from '../store'\n\n/**\n * Public interface for ScrollRig\n */\nexport const useScrollbar = () => {\n  const enabled = useCanvasStore((state) => state.hasSmoothScrollbar)\n  const scroll = useCanvasStore((state) => state.scroll)\n  const scrollTo = useCanvasStore((state) => state.scrollTo)\n  const onScroll = useCanvasStore((state) => state.onScroll)\n  const __lenis = useCanvasStore((state) => state.__lenis)\n\n  return {\n    enabled,\n    scroll,\n    scrollTo,\n    onScroll,\n    __lenis,\n  }\n}\n", "// https://www.typescriptlang.org/docs/handbook/modules.html#ambient-modules\n/// <reference path=\"../types/global.ts\" />\n\nimport { useRef, useCallback, useEffect, useMemo, useState, MutableRefObject } from 'react'\nimport { useInView } from 'react-intersection-observer'\nimport { useWindowSize } from './useWindowSize'\nimport vecn from 'vecn'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { mapLinear } from '../utils/math'\nimport { useCanvasStore } from '../store'\nimport { useScrollbar } from '../scrollbar/useScrollbar'\nimport type { ScrollData } from '../scrollbar/SmoothScrollbarTypes'\n\nimport type { Rect, Bounds, TrackerOptions, Tracker, ScrollState, UpdateCallback } from './useTrackerTypes'\n\nfunction updateBounds(bounds: Bounds, rect: Rect, scroll: ScrollData, size: any) {\n  bounds.top = rect.top - (scroll.y || 0)\n  bounds.bottom = rect.bottom - (scroll.y || 0)\n  bounds.left = rect.left - (scroll.x || 0)\n  bounds.right = rect.right - (scroll.x || 0)\n  bounds.width = rect.width\n  bounds.height = rect.height\n  // move coordinate system so 0,0 is at center of screen\n  bounds.x = bounds.left + rect.width * 0.5 - size.width * 0.5\n  bounds.y = bounds.top + rect.height * 0.5 - size.height * 0.5\n  bounds.positiveYUpBottom = size.height - bounds.bottom // inverse Y\n}\n\nfunction updatePosition(position: vec3, bounds: Bounds, scaleMultiplier: number) {\n  position.x = bounds.x * scaleMultiplier\n  position.y = -1 * bounds.y * scaleMultiplier\n}\n\n/**\n * Returns the current Scene position of the DOM element\n * based on initial getBoundingClientRect and scroll delta from start\n */\nfunction useTracker(track: MutableRefObject<HTMLElement>, options?: TrackerOptions): Tracker {\n  const size = useWindowSize()\n  const { scroll, onScroll } = useScrollbar()\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const debug = useCanvasStore((state) => state.debug)\n\n  // extend defaults with optional options\n  const { rootMargin, threshold, autoUpdate, wrapper } = useMemo(() => {\n    const target = { rootMargin: '0%', threshold: 0, autoUpdate: true } as TrackerOptions\n    const opts = options || {}\n    Object.keys(opts).map((key: string, index) => {\n      if (opts[key] !== undefined) target[key] = opts[key]\n    })\n    return target\n  }, [options])\n\n  // check if element is in viewport\n  const { ref, inView: inViewport } = useInView({ rootMargin, threshold })\n\n  // bind useInView ref to current tracking element\n  useLayoutEffect(() => {\n    ref(track.current)\n  }, [track, track?.current])\n\n  // Using state so it's reactive\n  const [scale, setScale] = useState<vec3>(vecn.vec3(0, 0, 0))\n\n  // Using ref because\n  const scrollState: ScrollState = useRef({\n    inViewport: false,\n    progress: -1,\n    visibility: -1,\n    viewport: -1,\n  }).current\n\n  // DOM rect (initial position in pixels offset by scroll value on page load)\n  // Using ref so we can calculate bounds & position without a re-render\n  const rect = useRef({\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0,\n  }).current\n\n  // expose internal ref as a reactive state as well\n  const [reactiveRect, setReactiveRect] = useState<Rect>(rect)\n\n  // bounding rect in pixels - updated by scroll\n  const bounds = useRef({\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n    positiveYUpBottom: 0,\n  }).current\n\n  // position in viewport units - updated by scroll\n  const position = useRef(vecn.vec3(0, 0, 0)).current\n\n  // Calculate bounding Rect as soon as it's available\n  useLayoutEffect(() => {\n    const _rect = track.current?.getBoundingClientRect()\n    if (!_rect) return\n    const initialY = wrapper ? (wrapper as HTMLElement).scrollTop : window.scrollY\n    const initialX = wrapper ? (wrapper as HTMLElement).scrollLeft : window.scrollX\n    rect.top = _rect.top + initialY\n    rect.bottom = _rect.bottom + initialY\n    rect.left = _rect.left + initialX\n    rect.right = _rect.right + initialX\n    rect.width = _rect.width\n    rect.height = _rect.height\n    setReactiveRect({ ...rect })\n    setScale(vecn.vec3(rect?.width * scaleMultiplier, rect?.height * scaleMultiplier, 1))\n    debug &&\n      console.log(\n        'useTracker.getBoundingClientRect:',\n        rect,\n        'intialScroll:',\n        { initialY, initialX },\n        'size:',\n        size,\n        'pageReflow:',\n        pageReflow\n      )\n  }, [track, size, pageReflow, scaleMultiplier, debug])\n\n  const update = useCallback(\n    ({ onlyUpdateInViewport = false, scroll: overrideScroll }: UpdateCallback = {}) => {\n      if (!track.current || (onlyUpdateInViewport && !scrollState.inViewport)) {\n        return\n      }\n\n      const _scroll = overrideScroll || scroll\n\n      updateBounds(bounds, rect, _scroll, size)\n      updatePosition(position, bounds, scaleMultiplier)\n\n      // scrollState setup based on scroll direction\n      const isHorizontal = _scroll.scrollDirection === 'horizontal'\n      const sizeProp = isHorizontal ? 'width' : 'height'\n      const startProp = isHorizontal ? 'left' : 'top'\n\n      // calculate progress of passing through viewport (0 = just entered, 1 = just exited)\n      const pxInside = size[sizeProp] - bounds[startProp]\n      scrollState.progress = mapLinear(pxInside, 0, size[sizeProp] + bounds[sizeProp], 0, 1) // percent of total visible distance\n      scrollState.visibility = mapLinear(pxInside, 0, bounds[sizeProp], 0, 1) // percent of item height in view\n      scrollState.viewport = mapLinear(pxInside, 0, size[sizeProp], 0, 1) // percent of window height scrolled since visible\n    },\n    [track, size, scaleMultiplier, scroll]\n  )\n\n  // update scrollState in viewport\n  useLayoutEffect(() => {\n    scrollState.inViewport = inViewport\n    // update once more in case it went out of view\n    update({ onlyUpdateInViewport: false })\n    debug && console.log('useTracker.inViewport:', inViewport, 'update()')\n  }, [inViewport])\n\n  // re-run if the callback updated\n  useLayoutEffect(() => {\n    update({ onlyUpdateInViewport: false })\n    debug && console.log('useTracker.update on resize/reflow')\n  }, [update, pageReflow])\n\n  // auto-update on scroll\n  useEffect(() => {\n    if (autoUpdate) return onScroll((_scroll) => update({ onlyUpdateInViewport: true }))\n  }, [autoUpdate, update, onScroll])\n\n  return {\n    // Reactive props\n    scale, // reactive scene scale - includes z-axis so it can be spread onto mesh directly\n    inViewport, // reactive prop for when inside viewport\n    // Non-reactive props (only updates on window resize)\n    // Child values are updated on scroll\n    rect: reactiveRect, // Dom rect\n    bounds, // scrolled bounding rect in pixels\n    position, // scrolled element position in viewport units\n    scrollState, // scroll progress stats - not reactive\n    // Utilities\n    update, // optional - manually update tracker\n  }\n}\n\nexport { useTracker }\n", "import React, { useEffect, useState, useRef, MutableRefObject, ReactNode } from 'react'\nimport { Scene, Group } from 'three'\nimport { useFrame, createPortal, useThree } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\nimport { DebugMesh } from './DebugMesh'\nimport { useTracker } from '../hooks/useTracker'\nimport type { ScrollState } from '../hooks/useTrackerTypes'\n\nexport interface ScrollSceneChildProps {\n  track: MutableRefObject<HTMLElement>\n  margin: number\n  priority: number\n  scale: vec3\n  scrollState: ScrollState\n  inViewport: boolean\n  scene: Scene\n}\n\ninterface IScrollScene {\n  track: MutableRefObject<HTMLElement>\n  children: (state: ScrollSceneChildProps) => ReactNode\n  margin?: number\n  inViewportMargin?: string\n  inViewportThreshold?: number\n  visible?: boolean\n  hideOffscreen?: boolean\n  scissor?: boolean\n  debug?: boolean\n  as?: string\n  priority?: number\n  scene?: Scene\n}\n\n/**\n * Generic THREE.js Scene that tracks the dimensions and position of a DOM element while scrolling\n * Scene is positioned and scaled exactly above DOM element\n *\n * @author david@14islands.com\n */\nfunction ScrollScene({\n  track,\n  children,\n  margin = 0, // Margin outside scissor to avoid clipping vertex displacement (px)\n  inViewportMargin,\n  inViewportThreshold,\n  visible = true,\n  hideOffscreen = true,\n  scissor = false,\n  debug = false,\n  as = 'scene',\n  priority = config.PRIORITY_SCISSORS,\n  scene,\n  ...props\n}: IScrollScene) {\n  const globalScene = useThree((s) => s.scene)\n  const contentRef = useRef<Group>()\n  const [portalScene] = useState<Scene | null>(scene || (scissor ? new Scene() : null))\n  const { requestRender, renderScissor } = useScrollRig()\n  const globalRender = useCanvasStore((state) => state.globalRender)\n\n  const { bounds, scale, position, scrollState, inViewport } = useTracker(track, {\n    rootMargin: inViewportMargin,\n    threshold: inViewportThreshold,\n  })\n\n  // Hide content when outside of viewport if `hideOffscreen` or set to `visible` prop\n  useLayoutEffect(() => {\n    if (!contentRef.current) return\n    contentRef.current.visible = hideOffscreen ? inViewport && visible : visible\n  }, [inViewport, hideOffscreen, visible])\n\n  // move content into place visibility or scale changes\n  useEffect(() => {\n    if (!contentRef.current) return\n    contentRef.current.position.y = position.y\n    contentRef.current.position.x = position.x\n  }, [scale, inViewport]) // scale updates on resize\n\n  // RENDER FRAME\n  useFrame(\n    ({ gl, camera }) => {\n      if (!contentRef.current) return\n\n      if (contentRef.current.visible) {\n        // move content\n        contentRef.current.position.y = position.y\n        contentRef.current.position.x = position.x\n\n        if (scissor) {\n          renderScissor({\n            gl,\n            portalScene,\n            camera,\n            left: bounds.left - margin,\n            top: bounds.positiveYUpBottom - margin,\n            width: bounds.width + margin * 2,\n            height: bounds.height + margin * 2,\n          })\n        } else {\n          requestRender()\n        }\n      }\n    },\n    globalRender ? priority : undefined\n  )\n\n  const InlineElement: any = as\n  const content = (\n    <InlineElement ref={contentRef}>\n      {(!children || debug) && scale && <DebugMesh scale={scale} />}\n      {children &&\n        scale &&\n        children({\n          // inherited props\n          track,\n          margin,\n          scene: portalScene || globalScene,\n          // new props from tracker\n          scale,\n          scrollState,\n          inViewport,\n          // useFrame render priority (in case children need to run after)\n          priority: priority,\n          // tunnel the rest\n          ...props,\n        })}\n    </InlineElement>\n  )\n\n  // render in portal if requested\n  return portalScene ? createPortal(content, portalScene) : content\n}\n\nexport { ScrollScene }\n", "import React, { useEffect, useState, useCallback, MutableRefObject, ReactNode } from 'react'\nimport { Scene } from 'three'\nimport { useFrame, createPortal, useThree } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useScrollRig } from '../hooks/useScrollRig'\nimport { DebugMesh } from './DebugMesh'\nimport { useTracker } from '../hooks/useTracker'\nimport type { Tracker } from '../hooks/useTrackerTypes'\nimport { PerspectiveCamera } from './PerspectiveCamera'\nimport { OrthographicCamera } from './OrthographicCamera'\nimport type { ScrollState } from '../hooks/useTrackerTypes'\n\ninterface IViewportScrollScene {\n  track: MutableRefObject<HTMLElement>\n  children: (state: ViewportScrollSceneChildProps) => ReactNode\n  margin?: number\n  inViewportMargin?: string\n  inViewportThreshold?: number\n  visible?: boolean\n  hideOffscreen?: boolean\n  debug?: boolean\n  orthographic?: boolean\n  priority?: number\n  hud?: boolean // clear depth to render on top\n  camera?: any\n}\n\nexport interface ViewportScrollSceneChildProps {\n  track: MutableRefObject<HTMLElement>\n  margin: number\n  priority: number\n  scale: vec3\n  scrollState: ScrollState\n  inViewport: boolean\n}\n\n/**\n * Generic THREE.js Scene that tracks the dimensions and position of a DOM element while scrolling\n * Scene is rendered into a GL viewport matching the DOM position for better performance\n *\n * Adapted to @react-three/fiber from https://threejsfundamentals.org/threejs/lessons/threejs-multiple-scenes.html\n * @author david@14islands.com\n */\nconst Viewport = ({\n  track,\n  children,\n  margin = 0, // Margin outside viewport to avoid clipping vertex displacement (px)\n  visible = true,\n  hideOffscreen = true,\n  debug = false,\n  orthographic = false,\n  priority = config.PRIORITY_VIEWPORTS,\n  inViewport,\n  bounds,\n  scale,\n  scrollState,\n  camera,\n  hud,\n  position, // pick out in order to not pass down to child (should be safe to spread props on child)\n  rect, // pick out in order to not pass down to child (should be safe to spread props on child)\n  ...props\n}: IViewportScrollScene & Tracker) => {\n  const scene = useThree((s) => s.scene)\n  const get = useThree((state) => state.get)\n  const setEvents = useThree((state) => state.setEvents)\n\n  const { renderViewport } = useScrollRig()\n\n  // Hide scene when outside of viewport if `hideOffscreen` or set to `visible` prop\n  useLayoutEffect(() => {\n    scene.visible = hideOffscreen ? inViewport && visible : visible\n  }, [inViewport, hideOffscreen, visible])\n\n  // From: https://github.com/pmndrs/drei/blob/d22fe0f58fd596c7bfb60a7a543cf6c80da87624/src/web/View.tsx#L80\n  useEffect(() => {\n    // Connect the event layer to the tracking element\n    const old = get().events.connected\n    setEvents({ connected: track.current })\n    return () => setEvents({ connected: old })\n  }, [])\n\n  // RENDER FRAME\n  useFrame(({ gl, scene, camera }) => {\n    // Render scene to viewport using local camera and limit updates using scissor test\n    if (scene.visible) {\n      renderViewport({\n        gl,\n        scene,\n        camera,\n        left: bounds.left - margin,\n        top: bounds.positiveYUpBottom - margin,\n        width: bounds.width + margin * 2,\n        height: bounds.height + margin * 2,\n        clearDepth: !!hud,\n      })\n    }\n  }, priority)\n\n  return (\n    <>\n      {!orthographic && <PerspectiveCamera manual margin={margin} makeDefault {...camera} />}\n      {orthographic && <OrthographicCamera manual margin={margin} makeDefault {...camera} />}\n      {(!children || debug) && scale && <DebugMesh scale={scale} />}\n      {children &&\n        // scene &&\n        scale &&\n        children({\n          // inherited props\n          track,\n          margin,\n          // tracker props\n          scale,\n          scrollState,\n          inViewport,\n          // useFrame render priority (in case children need to run after)\n          priority,\n          // tunnel the rest\n          ...props,\n        })}\n    </>\n  )\n}\n\nfunction ViewportScrollScene({\n  track,\n  margin = 0, // Margin outside viewport to avoid clipping vertex displacement (px)\n  inViewportMargin,\n  inViewportThreshold,\n  priority,\n  ...props\n}: IViewportScrollScene) {\n  const [scene] = useState(() => new Scene())\n\n  const { bounds, ...trackerProps } = useTracker(track, {\n    rootMargin: inViewportMargin,\n    threshold: inViewportThreshold,\n  })\n\n  // From: https://github.com/pmndrs/drei/blob/d22fe0f58fd596c7bfb60a7a543cf6c80da87624/src/web/View.tsx#L80\n  const compute = useCallback(\n    (event: any, state: any) => {\n      // limit events to DOM element bounds\n      if (track.current && event.target === track.current) {\n        const { width, height, left, top } = bounds\n        const mWidth = width + margin * 2\n        const mHeight = height + margin * 2\n        const x = event.clientX - left + margin\n        const y = event.clientY - top + margin\n        state.pointer.set((x / mWidth) * 2 - 1, -(y / mHeight) * 2 + 1)\n        state.raycaster.setFromCamera(state.pointer, state.camera)\n      }\n    },\n    [bounds]\n  )\n\n  return (\n    bounds &&\n    createPortal(\n      <Viewport track={track} bounds={bounds} priority={priority} margin={margin} {...props} {...trackerProps} />,\n      scene,\n      // @ts-ignore\n      { events: { compute, priority }, size: { width: bounds.width, height: bounds.height } }\n    )\n  )\n}\n\nexport { ViewportScrollScene }\n", "import { useEffect, useMemo, useCallback, ReactNode } from 'react'\nimport { MathUtils } from 'three'\n\nimport { useCanvasStore } from '../store'\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\n\nimport { ScrollRigState } from '../hooks/useScrollRig'\n/**\n * Adds THREE.js object to the GlobalCanvas while the component is mounted\n * @param {object} object THREE.js object3d\n */\nfunction useCanvas(\n  object: ReactNode | ((props: ScrollRigState) => ReactNode),\n  props: any = {},\n  { key, dispose = true }: { key?: string; dispose?: boolean } = {}\n) {\n  const updateCanvas = useCanvasStore((state) => state.updateCanvas)\n  const renderToCanvas = useCanvasStore((state) => state.renderToCanvas)\n  const removeFromCanvas = useCanvasStore((state) => state.removeFromCanvas)\n\n  // auto generate uuid v4 key\n  const uniqueKey = useMemo(() => key || MathUtils.generateUUID(), [])\n\n  // render to canvas if not mounted already\n  useLayoutEffect(() => {\n    renderToCanvas(uniqueKey, object, { ...props, inactive: false })\n  }, [uniqueKey])\n\n  // remove from canvas if no usage (after render so new users have time to register)\n  useEffect(() => {\n    return () => {\n      removeFromCanvas(uniqueKey, dispose)\n    }\n  }, [uniqueKey])\n\n  // return function that can set new props on the canvas component\n  const set = useCallback(\n    (props: any) => {\n      updateCanvas(uniqueKey, props)\n    },\n    [updateCanvas, uniqueKey]\n  )\n\n  // auto update props when they change\n  useEffect(() => {\n    set(props)\n  }, [...Object.values(props)])\n\n  return set\n}\n\nexport { useCanvas }\n", "import { forwardRef, ReactNode } from 'react'\nimport { useCanvas } from '../hooks/useCanvas'\n\nimport { ScrollRigState } from '../hooks/useScrollRig'\n\ninterface IUseCanvas {\n  children: ReactNode | ((props: ScrollRigState) => ReactNode)\n  id?: string // persistent layout id\n  dispose?: boolean // dispose on unmount\n  [key: string]: any // Any props to reactively tunnel to the child\n}\n\nconst UseCanvas = forwardRef(({ children, id, dispose = true, ...props }: IUseCanvas, ref) => {\n  if (!children) return null\n  // auto update canvas with all props\n  useCanvas(children, { ...props, id, ref }, { key: id, dispose })\n  return null\n})\n\nexport { UseCanvas }\n", "import { useEffect, RefObject, useMemo, useState } from 'react'\nimport { useThree, useLoader } from '@react-three/fiber'\nimport { Texture, CanvasTexture, ImageBitmapLoader, TextureLoader, DefaultLoadingManager } from 'three'\nimport { suspend } from 'suspend-react'\nimport supportsWebP from 'supports-webp'\nimport equal from 'fast-deep-equal'\n\nimport { useWindowSize } from './useWindowSize'\nimport { useCanvasStore } from '../store'\n\n/**\n *  Create Threejs Texture from DOM image tag\n *\n *  - Supports <picture> and `srcset` - uses `currentSrc` to get the responsive image source\n *\n *  - Supports lazy-loading image - suspends until first load event. Warning: the GPU upload can cause jank\n *\n *  - Relies on browser cache to avoid loading image twice. We let the <img> tag load the image and suspend until it's ready.\n *\n *  - NOTE: You must add the `crossOrigin` attribute\n *     <img src=\"\" alt=\"\" crossOrigin=\"anonymous\"/>\n */\n\nlet hasWebpSupport: boolean = false\n// this test is fast - \"should\" run before first image is requested\nsupportsWebP.then((supported) => {\n  hasWebpSupport = supported\n})\n\nfunction useTextureLoader() {\n  // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n  // expensive work of uploading a texture to the GPU off the main thread.\n  // Copied from: github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/GLTFLoader.js#L2424\n  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true\n  const isFirefox = navigator.userAgent.indexOf('Firefox') > -1\n  // @ts-ignore\n  const firefoxVersion = isFirefox ? navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1] : -1\n  return typeof createImageBitmap === 'undefined' || isSafari || (isFirefox && Number(firefoxVersion) < 98)\n}\n\nfunction useImageAsTexture(\n  imgRef: RefObject<HTMLImageElement>,\n  { initTexture = true, premultiplyAlpha = 'default' } = {}\n) {\n  const gl = useThree((s) => s.gl)\n  const size = useWindowSize()\n  const debug = useCanvasStore((state) => state.debug)\n\n  // This is a workaround for detecting lazy loading images\n  // unfortunately the `loadstart`event is not working everywhere: https://bugs.chromium.org/p/chromium/issues/detail?id=458851\n  // So we can't suspend while lazy images are loading - only detect when they finished\n  const [newSrcDetected, setNewSrcDetected] = useState(imgRef.current?.currentSrc)\n  useEffect(() => {\n    const el = imgRef.current\n    const onLoad = () => {\n      setNewSrcDetected(imgRef.current?.currentSrc)\n    }\n    el?.addEventListener('load', onLoad)\n    return () => el?.removeEventListener('load', onLoad)\n  }, [imgRef, newSrcDetected, setNewSrcDetected])\n\n  // suspend until we have currentSrc for this `size`\n  const currentSrc = suspend(\n    () => {\n      DefaultLoadingManager.itemStart('waiting for DOM image')\n      return new Promise((resolve) => {\n        const el = imgRef.current\n\n        function returnResolve() {\n          resolve(el?.currentSrc)\n          DefaultLoadingManager.itemEnd('waiting for DOM image')\n        }\n\n        // respond to future load event if not cached\n        el?.addEventListener('load', returnResolve, { once: true })\n\n        // detect if loaded from browser cache\n        if (el?.complete) {\n          el?.removeEventListener('load', returnResolve)\n          returnResolve()\n        }\n      })\n    },\n    [imgRef, size, imgRef.current?.currentSrc, newSrcDetected],\n    { equal } // use deep-equal since size ref seems to update on route change\n  ) as string\n\n  const LoaderProto = useTextureLoader() ? TextureLoader : ImageBitmapLoader\n\n  // @ts-ignore\n  const result: any = useLoader(LoaderProto, currentSrc, (loader) => {\n    if (loader instanceof ImageBitmapLoader) {\n      loader.setOptions({\n        colorSpaceConversion: 'none',\n        premultiplyAlpha, // \"none\" increases blocking time in lighthouse\n        imageOrientation: 'flipY',\n      })\n      // Add webp to Accept header if supported\n      // TODO: add check for AVIF\n      loader.setRequestHeader({\n        Accept: `${hasWebpSupport ? 'image/webp,' : ''}*/*`,\n      })\n    }\n  })\n\n  const texture = useMemo(() => {\n    if (result instanceof Texture) {\n      return result\n    }\n    if (result instanceof ImageBitmap) {\n      return new CanvasTexture(result)\n    }\n  }, [result]) as Texture\n\n  // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n  useEffect(\n    function uploadTextureToGPU() {\n      initTexture && gl.initTexture(texture)\n      debug && console.log('useImageAsTexture', 'initTexture()')\n    },\n    [gl, texture, initTexture]\n  )\n\n  return texture\n}\n\nexport { useImageAsTexture }\n", "import { useEffect, useRef, useCallback, forwardRef, useImperativeHandle } from 'react'\nimport Lenis, { ScrollCallback, VirtualScrollCallback } from 'lenis'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\nimport { ISmoothScrollbar, ScrollToTarget, ScrollToConfig } from './SmoothScrollbarTypes'\n\nconst POINTER_EVENTS_ENABLE_VELOCITY = 1\nconst POINTER_EVENTS_DISABLE_VELOCITY = 1.5\n\nconst SmoothScrollbarImpl = (\n  {\n    children,\n    enabled = true,\n    locked = false,\n    scrollRestoration = 'auto',\n    disablePointerOnScroll = true,\n    horizontal = false,\n    scrollInContainer = false,\n    updateGlobalState = true,\n    onScroll,\n    config = {},\n    invalidate = () => {},\n    addEffect,\n  }: ISmoothScrollbar,\n  ref: any\n) => {\n  const lenis = useRef<Lenis>()\n  const preventPointer = useRef(false)\n  const globalScrollState = useCanvasStore((s) => s.scroll)\n\n  // Expose lenis imperative API\n  useImperativeHandle(ref, () => ({\n    start: () => lenis.current?.start(),\n    stop: () => lenis.current?.stop(),\n    on: (event: 'scroll' | 'virtual-scroll', cb: ScrollCallback | VirtualScrollCallback) =>\n      // @ts-ignore\n      lenis.current?.on(event, cb),\n    scrollTo: (target: ScrollToTarget, props: ScrollToConfig) => lenis.current?.scrollTo(target, props),\n    raf: (time: number) => lenis.current?.raf(time),\n    __lenis: lenis.current,\n  }))\n\n  // disable pointer events while scrolling to avoid slow event handlers\n  const preventPointerEvents = useCallback(\n    (prevent: boolean) => {\n      if (!disablePointerOnScroll) return\n      if (preventPointer.current !== prevent) {\n        preventPointer.current = prevent\n        document.documentElement.style.pointerEvents = prevent ? 'none' : 'auto'\n      }\n    },\n    [disablePointerOnScroll, preventPointer]\n  )\n\n  // apply chosen scroll restoration\n  useLayoutEffect(() => {\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = scrollRestoration\n    }\n  }, [])\n\n  // INIT LENIS\n  useLayoutEffect(() => {\n    // Set up scroll containers - allows scrolling without resizing window on iOS/mobile\n    const html = document.documentElement\n    const wrapper = document.body\n    const content = document.body.firstElementChild\n\n    html.classList.toggle('ScrollRig-scrollHtml', scrollInContainer)\n    wrapper.classList.toggle('ScrollRig-scrollWrapper', scrollInContainer)\n\n    if (scrollInContainer) {\n      Object.assign(config, {\n        smoothTouch: true,\n        wrapper,\n        content,\n      })\n    }\n\n    lenis.current = new Lenis({\n      orientation: horizontal ? 'horizontal' : 'vertical',\n      ...config,\n      // override and disable all smooth settings if scrollbar is disabled\n      ...(!enabled ? { smoothWheel: false, syncTouch: false, smoothTouch: false } : {}),\n    })\n\n    // let r3f drive the frameloop\n    let removeEffect: () => void\n    if (addEffect) {\n      removeEffect = addEffect((time: number) => lenis.current?.raf(time))\n    } else {\n      // manual animation frame\n      // TODO use framer motion / popmotion render loop?\n      let _raf: number\n      function raf(time: number) {\n        lenis.current?.raf(time)\n        _raf = requestAnimationFrame(raf)\n      }\n      _raf = requestAnimationFrame(raf)\n      removeEffect = () => cancelAnimationFrame(_raf)\n    }\n\n    return () => {\n      removeEffect()\n      lenis.current?.destroy()\n    }\n  }, [enabled])\n\n  // BIND TO LENIS SCROLL EVENT\n  useLayoutEffect(() => {\n    const _lenis = lenis.current\n    const _onScroll = ({ scroll, limit, velocity, direction, progress }: any) => {\n      const y = !horizontal ? scroll : 0\n      const x = horizontal ? scroll : 0\n\n      // update global scroll store\n      if (updateGlobalState) {\n        globalScrollState.y = y\n        globalScrollState.x = x\n        globalScrollState.limit = limit\n        globalScrollState.velocity = velocity\n        globalScrollState.direction = direction\n        globalScrollState.progress = progress || 0 // avoid NaN from Lenis\n      }\n\n      if (Math.abs(velocity) > POINTER_EVENTS_DISABLE_VELOCITY) {\n        preventPointerEvents(true)\n      }\n      if (Math.abs(velocity) < POINTER_EVENTS_ENABLE_VELOCITY) {\n        preventPointerEvents(false)\n      }\n\n      onScroll && onScroll({ scroll, limit, velocity, direction, progress })\n\n      invalidate() // demand a R3F frame on scroll\n    }\n\n    _lenis?.on('scroll', _onScroll)\n\n    // update global state\n    if (updateGlobalState) {\n      globalScrollState.scrollDirection = horizontal ? 'horizontal' : 'vertical'\n\n      // expose global scrollTo and onScroll function to subscribe to scroll events\n      useCanvasStore.setState({\n        __lenis: _lenis,\n        scrollTo: (...args) => {\n          _lenis?.scrollTo(...args)\n        },\n        onScroll: (cb: ScrollCallback) => {\n          _lenis?.on('scroll', cb)\n          // @ts-ignore\n          _lenis?.emit() // send current scroll to new subscriber\n          return () => _lenis?.off('scroll', cb)\n        },\n      })\n\n      // Set current scroll position on load in case reloaded further down\n      useCanvasStore.getState().scroll.y = window.scrollY\n      useCanvasStore.getState().scroll.x = window.scrollX\n    }\n\n    // fire our internal scroll callback to update globalState\n    // @ts-ignore\n    _lenis?.emit()\n    return () => {\n      _lenis?.off('scroll', _onScroll)\n      // reset global store\n      if (updateGlobalState)\n        useCanvasStore.setState({\n          __lenis: undefined,\n          onScroll: () => () => {},\n          scrollTo: () => {},\n        })\n    }\n  }, [enabled])\n\n  // Interaction events - invalidate R3F loop and enable pointer events\n  useLayoutEffect(() => {\n    const invalidateOnWheelEvent = () => invalidate()\n    const onPointerInteraction = () => preventPointerEvents(false)\n    window.addEventListener('pointermove', onPointerInteraction)\n    window.addEventListener('pointerdown', onPointerInteraction)\n    window.addEventListener('wheel', invalidateOnWheelEvent)\n    return () => {\n      window.removeEventListener('pointermove', onPointerInteraction)\n      window.removeEventListener('pointerdown', onPointerInteraction)\n      window.removeEventListener('wheel', invalidateOnWheelEvent)\n    }\n  }, [])\n\n  // Mark as enabled in global state\n  useEffect(() => {\n    if (updateGlobalState) {\n      document.documentElement.classList.toggle('js-smooth-scrollbar-enabled', enabled)\n      document.documentElement.classList.toggle('js-smooth-scrollbar-disabled', !enabled)\n      useCanvasStore.setState({ hasSmoothScrollbar: enabled })\n    }\n    return () => {\n      // cleanup\n      document.documentElement.classList.remove('js-smooth-scrollbar-enabled')\n      document.documentElement.classList.remove('js-smooth-scrollbar-disabled')\n    }\n  }, [enabled])\n\n  useEffect(() => {\n    locked ? lenis.current?.stop() : lenis.current?.start()\n  }, [locked])\n\n  {\n    /* Use function child so we can spread props\n    - for instance disable pointer events while scrolling */\n  }\n  return children ? children({}) : null\n}\n\nexport const SmoothScrollbar = forwardRef<any, ISmoothScrollbar>(SmoothScrollbarImpl)\n", "import React, { forwardRef } from 'react'\nimport { SmoothScrollbar } from '../scrollbar/SmoothScrollbar'\nimport { ISmoothScrollbar } from '../scrollbar/SmoothScrollbarTypes'\nimport { addEffect, invalidate } from '@react-three/fiber'\nimport { useCanvasStore } from '../store'\n\nfunction R3FSmoothScrollbar(props: ISmoothScrollbar, ref: any) {\n  const isCanvasAvailable = useCanvasStore((s) => s.isCanvasAvailable)\n  if (!isCanvasAvailable) return <SmoothScrollbar key=\"native\" ref={ref} {...props} />\n  return <SmoothScrollbar key=\"r3f\" ref={ref} invalidate={invalidate} addEffect={addEffect} {...props} />\n}\n\nexport default forwardRef<any, ISmoothScrollbar>(R3FSmoothScrollbar)\n", "import './styles/index.css'\n\n// Components\nexport { GlobalCanvas } from './components/GlobalCanvas'\nexport { type ScrollSceneChildProps, ScrollScene } from './components/ScrollScene'\nexport { type ViewportScrollSceneChildProps, ViewportScrollScene } from './components/ViewportScrollScene'\nexport { UseCanvas } from './components/UseCanvas'\n\n// Hooks\nexport { useScrollRig } from './hooks/useScrollRig'\nexport { useCanvas } from './hooks/useCanvas'\nexport { useScrollbar } from './scrollbar/useScrollbar'\nexport { useTracker } from './hooks/useTracker'\nexport { useWindowSize } from './hooks/useWindowSize'\n\n// Utils hooks\nexport { useImageAsTexture } from './hooks/useImageAsTexture'\n\n// Scrollbar\nexport { default as SmoothScrollbar } from './components/R3FSmoothScrollbar'\n\n// CSS class names for hiding stuff\n// Matching css styles can be imported from @14islands/r3f-scrollr-rig/css\nexport const styles = {\n  hidden: 'ScrollRig-visibilityHidden',\n  hiddenWhenSmooth: 'ScrollRig-visibilityHidden ScrollRig-hiddenIfSmooth',\n  transparentColor: 'ScrollRig-transparentColor',\n  transparentColorWhenSmooth: 'ScrollRig-transparentColor ScrollRig-hiddenIfSmooth',\n}\n\n// Private-ish\n// ----------------------------------\nexport { useCanvasStore } from './store'\n\n// Types\nexport type { ScrollState } from './hooks/useTrackerTypes'\n"],
  "mappings": "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",
  "names": ["i", "i", "a", "query", "debounce", "i", "p", "n", "s", "factory", "lerp", "t", "c", "o", "a", "i", "ResizeObserverBoxOptions", "ResizeObserverSize", "DOMRectReadOnly", "ResizeObserverEntry", "callbacks", "ResizeObserver", "Scheduler", "n", "ResizeObservation", "size", "ResizeObserverDetail", "i", "ResizeObserverController", "ResizeObserver", "observerMap", "observerMap", "callbacks", "a", "i", "entry", "t", "n", "d", "lerp", "callbacks", "i", "e", "time", "cache", "useLayoutEffect", "window", "vanillaUseLayoutEffect", "useEffect", "config", "PRIORITY_PRELOAD", "PRIORITY_SCISSORS", "PRIORITY_VIEWPORTS", "PRIORITY_GLOBAL", "DEFAULT_SCALE_MULTIPLIER", "preloadQueue", "useCanvasStore", "create", "set", "debug", "scaleMultiplier", "globalRender", "globalPriority", "globalClearDepth", "globalRenderQueue", "clearGlobalRenderQueue", "isCanvasAvailable", "hasSmoothScrollbar", "canvasChildren", "renderToCanvas", "key", "mesh", "props", "Object", "getOwnPropertyDescriptor", "instances", "inactive", "_extends", "updateCanvas", "newProps", "removeFromCanvas", "dispose", "_canvasChildren$key", "_objectWithoutPropertiesLoose", "map", "_toPropertyKey", "pageReflow", "requestReflow", "state", "scroll", "y", "x", "limit", "velocity", "progress", "direction", "scrollDirection", "undefined", "__lenis", "scrollTo", "onScroll", "ResizeManager", "observer", "ResizeObserver", "Polyfill", "console", "log", "observe", "document", "body", "disconnect", "PerspectiveCamera", "forwardRef", "_ref", "ref", "makeDefault", "margin", "_excluded", "useThree", "camera", "size", "viewport", "cameraRef", "useRef", "useImperativeHandle", "current", "fov", "distance", "aspect", "useMemo", "_props$position", "height", "width", "position", "Math", "PI", "atan", "tan", "lookAt", "updateProjectionMatrix", "updateMatrixWorld", "getCurrentViewport", "oldCam", "React", "onUpdate", "self", "near", "far", "OrthographicCamera", "max", "left", "right", "top", "bottom", "setAllCulled", "obj", "overrideCulled", "wasFrustumCulled", "frustumCulled", "wasVisible", "visible", "children", "forEach", "child", "viewportSize", "Vector2", "requestRender", "layers", "getState", "renderScissor", "gl", "scene", "layer", "autoClear", "clearDepth", "setScissor", "setScissorTest", "render", "renderViewport", "scissor", "getSize", "setViewport", "preloadScene", "callback", "push", "globalScene", "globalCamera", "invalidate", "useScrollRig", "_scrollRig", "reflow", "reflowCompleted", "GlobalChildren", "s", "scrollRig", "keys", "length", "clear", "createElement", "Fragment", "cloneElement", "GlobalRenderer", "frameloop", "checkShaderErrors", "useFrame", "disableAll", "enable", "CanvasErrorBoundary", "Component", "constructor", "super", "this", "error", "static", "onError", "_excluded2", "polyfill", "GlobalCanvasImpl", "as", "Canvas", "style", "orthographic", "useGlobalRenderer", "__r3f_scroll_rig", "version", "qs", "parse", "location", "search", "setState", "info", "startTransition", "id", "manual", "failIfMajorPerformanceCaveat", "resize", "debounce", "GlobalCanvas", "_ref2", "documentElement", "classList", "add", "err", "remove", "DebugMesh", "scale", "args", "uniforms", "color", "value", "Color", "vertexShader", "fragmentShader", "transparent", "isBrowser", "useWindowSize", "windowSize", "setWindowSize", "useState", "innerWidth", "Infinity", "innerHeight", "canvasEl", "getElementById", "handleResize", "clientWidth", "clientHeight", "debouncedResize", "pkg", "addEventListener", "_observer", "removeEventListener", "mapLinear", "a1", "a2", "b1", "b2", "useScrollbar", "enabled", "useTracker", "track", "options", "rootMargin", "threshold", "autoUpdate", "wrapper", "target", "opts", "index", "inView", "inViewport", "useInView", "setScale", "vecn", "vec3", "scrollState", "visibility", "rect", "reactiveRect", "setReactiveRect", "bounds", "positiveYUpBottom", "_track$current", "_rect", "getBoundingClientRect", "initialY", "scrollTop", "scrollY", "initialX", "scrollLeft", "scrollX", "update", "useCallback", "onlyUpdateInViewport", "overrideScroll", "_scroll", "isHorizontal", "sizeProp", "pxInside", "ScrollScene", "inViewportMargin", "inViewportThreshold", "hideOffscreen", "priority", "contentRef", "portalScene", "Scene", "content", "createPortal", "_excluded3", "Viewport", "hud", "get", "setEvents", "old", "events", "connected", "ViewportScrollScene", "_useTracker", "trackerProps", "compute", "event", "pointer", "clientX", "clientY", "raycaster", "setFromCamera", "useCanvas", "object", "uniqueKey", "MathUtils", "generateUUID", "values", "UseCanvas", "hasWebpSupport", "useImageAsTexture", "imgRef", "initTexture", "premultiplyAlpha", "_imgRef$current", "_imgRef$current3", "newSrcDetected", "setNewSrcDetected", "currentSrc", "el", "onLoad", "_imgRef$current2", "suspend", "DefaultLoadingManager", "itemStart", "Promise", "resolve", "returnResolve", "itemEnd", "once", "complete", "equal", "LoaderProto", "isSafari", "test", "navigator", "userAgent", "isFirefox", "indexOf", "firefoxVersion", "match", "createImageBitmap", "Number", "useTextureLoader", "TextureLoader", "ImageBitmapLoader", "result", "useLoader", "loader", "setOptions", "colorSpaceConversion", "imageOrientation", "setRequestHeader", "Accept", "texture", "Texture", "ImageBitmap", "CanvasTexture", "supportsWebP", "then", "supported", "SmoothScrollbar", "SmoothScrollbarImpl", "locked", "scrollRestoration", "disablePointerOnScroll", "horizontal", "scrollInContainer", "updateGlobalState", "addEffect", "lenis", "preventPointer", "globalScrollState", "start", "_lenis$current", "stop", "_lenis$current2", "on", "cb", "_lenis$current3", "_lenis$current4", "raf", "time", "_lenis$current5", "preventPointerEvents", "prevent", "pointerEvents", "history", "html", "firstElementChild", "removeEffect", "toggle", "assign", "smoothTouch", "Lenis", "orientation", "smoothWheel", "syncTouch", "_lenis$current6", "_raf", "requestAnimationFrame", "_lenis$current7", "cancelAnimationFrame", "_lenis$current8", "destroy", "_lenis", "_onScroll", "abs", "emit", "off", "invalidateOnWheelEvent", "onPointerInteraction", "_lenis$current9", "_lenis$current10", "styles", "hidden", "hiddenWhenSmooth", "transparentColor", "transparentColorWhenSmooth"]
}
